{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>effdsl provides a simple and functional way to build Elasticsearch queries in Go.Instead of relying on maps or, even worse, raw string literals to describe queries\u2014which can be error-prone and lack features like easy parameterization, type safety, auto-completion, and compile-time validation\u2014 effdsl allows you to construct queries using intuitive function calls. This reduces the risk of subtle bugs caused by misspellings, makes parameterization easier and safer, and simplifies the process of constructing complex queries.</p> <p>Moreover, its design makes the procedural creation of queries both straightforward and refined, making it particularly useful for cases where queries need to be generated programmatically. (This started because I needed to implement an interpreter of an internal DSL into Elasticsearch queries.) The module focuses solely on building the query body, without direct integration with the database, allowing seamless integration into an existing Go codebase.</p> <p>effdsl supports most compound queries, full-text queries, and term-level queries. For a complete list of supported query types, please refer to the API coverage file in the effdsl GitHub repository. If there's a query type that isn't yet supported, feel free to open an issue or, even better, submit a pull request. \ud83d\ude4c</p>"},{"location":"#getting-started","title":"Getting started","text":""},{"location":"#getting-effdsl","title":"Getting effdsl","text":"<p>With Go module support, simply add the following import</p> <pre><code>import \"github.com/sdqri/effdsl\"\n</code></pre> <p>to your code, and then <code>go [build|run|test]</code> will automatically fetch the necessary dependencies.</p> <p>Otherwise, run the following Go command to install the <code>effdsl</code> package:</p> <pre><code>$ go get -u github.com/sdqri/effdsl\n</code></pre>"},{"location":"#how-to-use","title":"How to use","text":"<p>Start with <code>effdsl.Define()</code>, and use types and documentations to find suitable options.</p>"},{"location":"#examples","title":"\ud83d\udd0d Examples:","text":"<p>Traditional Way:</p> <p>Here\u2019s a simple match query in the traditional way using raw strings in Go:</p> <pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n)\n\nquery := `{\n  \"query\": {\n    \"match\": {\n      \"message\": {\n        \"query\": \"Hello World\"\n      }\n    }\n  }\n}`\n\nres, err := es.Search(\n  es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre> <p>Using effdsl:</p> <p>And here\u2019s the same query using effdsl:</p> <pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    mq \"github.com/sdqri/effdsl/v2/queries/matchquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        mq.MatchQuery(\"message\", \"Hello World\")\n    ),    \n)\n\nres, err := es.Search(\n  es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre> <p>For more examples and details on query parameters, visit the documentation.</p>"},{"location":"#contribution","title":"\ud83e\udd1d Contribution","text":"<p>Contributions are welcome! Whether it's fixing a bug \ud83d\udc1b, adding a new feature \ud83c\udf1f, or improving the documentation \ud83d\udcda, your help is appreciated. Please check out the CONTRIBUTING.md guide to get started.</p>"},{"location":"#license","title":"\ud83d\udcdc License","text":"<p>This project is licensed under the MIT License. For more details, see the License file. \ud83d\udcc4 ( In short: You can use, modify, and distribute this software freely as long as you include the original copyright notice and license. The software is provided \"as-is\" without warranties or guarantees.)</p>"},{"location":"adjacency_matrix_aggregation/","title":"Adjacency Matrix Aggregation","text":"<p>The adjacency matrix aggregation returns a matrix of co-occurring filters.</p>"},{"location":"adjacency_matrix_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    adjacencymatrix \"github.com/sdqri/effdsl/v2/aggregations/bucket/adjacencymatrix\"\n)\n\nfilters := map[string]any{\n    \"group_a\": map[string]any{\"term\": map[string]any{\"tags\": \"foo\"}},\n    \"group_b\": map[string]any{\"term\": map[string]any{\"tags\": \"bar\"}},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        adjacencymatrix.AdjacencyMatrix(\n            \"interactions\",\n            filters,\n            adjacencymatrix.WithSeparator(\"&amp;\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"adjacency_matrix_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Filters (map[string]any) (Required, positional) Map of named filters.</p> </li> <li> <p>WithSeparator (string) (Optional, functional option) Separator for filter names.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"adjacency_matrix_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the adjacency matrix aggregation and its parameters, refer to the official Elasticsearch documentation on adjacency matrix aggregation.</p>"},{"location":"api_coverage/","title":"API Coverage","text":"<p>This page tracks the current coverage of effdsl APIs. Status indicates whether a feature is implemented in this repository.</p>"},{"location":"api_coverage/#queries","title":"Queries","text":""},{"location":"api_coverage/#compound-queries","title":"Compound queries","text":"Item Status Docs Bool query Supported bool_query.md Boosting query Supported boosting_query.md Constant score query Supported constant_score.md Disjunction max query Supported dis_max_query.md Function score query Not yet \u2014"},{"location":"api_coverage/#full-text-queries","title":"Full text queries","text":"Item Status Docs Intervals query Not yet \u2014 Match query Supported match_query.md Match bool prefix query Supported match_bool_prefix.md Match phrase query Supported match_phrase_query.md Match phrase prefix query Supported match_phrase_prefix.md Multi match query Supported multi_match_query.md Combined fields query Not yet \u2014 Query string query Supported query_string.md Simple query string query Supported simple_query_string.md"},{"location":"api_coverage/#term-level-queries","title":"Term-level queries","text":"Item Status Docs Exists query Supported exists_query.md Fuzzy query Supported fuzzy_query.md IDs query Supported ids_query.md Prefix query Supported prefix_query.md Range query Supported range_query.md Regexp query Supported regexp_query.md Term query Supported term_query.md Terms query Supported terms_query.md Terms set query Supported terms_set_query.md Wildcard query Supported wildcard_query.md"},{"location":"api_coverage/#joining-queries","title":"Joining queries","text":"Item Status Docs Nested query Supported nested_query.md"},{"location":"api_coverage/#suggesters","title":"Suggesters","text":"Item Status Docs Completion suggester Supported completion_suggester.md Phrase suggester Supported phrase_suggester.md Term suggester Supported term_suggester.md"},{"location":"api_coverage/#aggregations","title":"Aggregations","text":""},{"location":"api_coverage/#metrics","title":"Metrics","text":"Item Status Docs Avg aggregation Supported avg_aggregation.md Boxplot aggregation Supported boxplot_aggregation.md Cartesian bounds aggregation Supported cartesian_bounds_aggregation.md Cartesian centroid aggregation Supported cartesian_centroid_aggregation.md Cardinality aggregation Supported cardinality_aggregation.md Extended stats aggregation Supported extended_stats_aggregation.md Geo bounds aggregation Supported geo_bounds_aggregation.md Geo centroid aggregation Supported geo_centroid_aggregation.md Geo line aggregation Supported geo_line_aggregation.md Matrix stats aggregation Supported matrix_stats_aggregation.md Max aggregation Supported max_aggregation.md Median absolute deviation aggregation Supported median_absolute_deviation_aggregation.md Min aggregation Supported min_aggregation.md Percentile ranks aggregation Supported percentile_ranks_aggregation.md Percentiles aggregation Supported percentiles_aggregation.md Rate aggregation Supported rate_aggregation.md Scripted metric aggregation Supported scripted_metric_aggregation.md Stats aggregation Supported stats_aggregation.md String stats aggregation Supported string_stats_aggregation.md Sum aggregation Supported sum_aggregation.md T-test aggregation Supported t_test_aggregation.md Top hits aggregation Supported top_hits_aggregation.md Top metrics aggregation Supported top_metrics_aggregation.md Value count aggregation Supported value_count_aggregation.md Weighted avg aggregation Supported weighted_avg_aggregation.md"},{"location":"api_coverage/#bucket","title":"Bucket","text":"Item Status Docs Adjacency matrix aggregation Supported adjacency_matrix_aggregation.md Auto date histogram aggregation Supported auto_date_histogram_aggregation.md Composite aggregation Supported composite_aggregation.md Date histogram aggregation Supported date_histogram_aggregation.md Date range aggregation Supported date_range_aggregation.md Filter aggregation Supported filter_aggregation.md Filters aggregation Supported filters_aggregation.md Geo distance aggregation Supported geo_distance_aggregation.md Geohash grid aggregation Supported geohash_grid_aggregation.md Geo-tile grid aggregation Supported geo_tile_grid_aggregation.md Geohex grid aggregation Supported geohex_grid_aggregation.md Global aggregation Supported global_aggregation.md Histogram aggregation Supported histogram_aggregation.md IP range aggregation Supported ip_range_aggregation.md Missing aggregation Supported missing_aggregation.md Multi terms aggregation Supported multi_terms_aggregation.md Nested aggregation Supported nested_aggregation.md Parent aggregation Supported parent_aggregation.md Range aggregation Supported range_aggregation.md Rare terms aggregation Supported rare_terms_aggregation.md Reverse nested aggregation Supported reverse_nested_aggregation.md Sampler aggregation Supported sampler_aggregation.md Diversified sampler aggregation Supported diversified_sampler_aggregation.md Random sampler aggregation Supported random_sampler_aggregation.md Significant terms aggregation Supported significant_terms_aggregation.md Significant text aggregation Supported significant_text_aggregation.md Terms aggregation Supported terms_aggregation.md Children aggregation Supported children_aggregation.md Variable width histogram aggregation Supported variable_width_histogram_aggregation.md"},{"location":"api_coverage/#pipeline","title":"Pipeline","text":"Item Status Docs Avg bucket aggregation Supported avg_bucket_aggregation.md Bucket script aggregation Supported bucket_script_aggregation.md Bucket selector aggregation Supported bucket_selector_aggregation.md Bucket sort aggregation Supported bucket_sort_aggregation.md Cumulative cardinality aggregation Supported cumulative_cardinality_aggregation.md Cumulative sum aggregation Supported cumulative_sum_aggregation.md Derivative aggregation Supported derivative_aggregation.md Extended stats bucket aggregation Supported extended_stats_bucket_aggregation.md Max bucket aggregation Supported max_bucket_aggregation.md Min bucket aggregation Supported min_bucket_aggregation.md Stats bucket aggregation Supported stats_bucket_aggregation.md Sum bucket aggregation Supported sum_bucket_aggregation.md Percentiles bucket aggregation Supported percentiles_bucket_aggregation.md Serial diff aggregation Supported serial_diff_aggregation.md Normalize aggregation Supported normalize_aggregation.md Moving function aggregation Supported moving_fn_aggregation.md Moving percentiles aggregation Supported moving_percentiles_aggregation.md Bucket count K-S test aggregation Supported bucket_count_ks_test_aggregation.md Bucket correlation aggregation Supported bucket_correlation_aggregation.md Change point aggregation Supported change_point_aggregation.md Inference bucket aggregation Supported inference_bucket_aggregation.md"},{"location":"api_coverage/#search","title":"Search","text":""},{"location":"api_coverage/#customize-search-results","title":"Customize search results","text":"Item Status Docs Collapse search results Supported \u2014 Filter search results Not yet \u2014 Highlighting Not yet \u2014 Long-running searches Not yet \u2014 Near real-time search Not yet \u2014 Paginate search results Supported paginate_search.md Retrieve inner hits Not yet \u2014 Retrieve selected fields (source filtering) Supported \u2014 Search across clusters Not yet \u2014 Search multiple data streams and indices Not yet \u2014 Search shard routing Not yet \u2014 Search templates Not yet \u2014 Sort search results Supported sort_search.md kNN search Not yet \u2014"},{"location":"api_coverage/#search-apis","title":"Search APIs","text":"Item Status Docs Point in time Supported \u2014"},{"location":"auto_date_histogram_aggregation/","title":"Auto Date Histogram Aggregation","text":"<p>The auto date histogram aggregation creates a date histogram with an automatically selected interval to target a specified number of buckets.</p>"},{"location":"auto_date_histogram_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    autodatehistogram \"github.com/sdqri/effdsl/v2/aggregations/bucket/autodatehistogram\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        autodatehistogram.AutoDateHistogram(\n            \"sales_over_time\",\n            \"timestamp\",\n            10,\n            autodatehistogram.WithMinimumInterval(\"day\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"auto_date_histogram_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Date field to bucket on.</p> </li> <li> <p>Buckets (int) (Required, positional) Target number of buckets.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format for bucket keys.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithTimeZone (string) (Optional, functional option) Time zone for rounding.</p> </li> <li> <p>WithMinimumInterval (string) (Optional, functional option) Minimum interval to use.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"auto_date_histogram_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the auto date histogram aggregation and its parameters, refer to the official Elasticsearch documentation on auto date histogram aggregation.</p>"},{"location":"avg_aggregation/","title":"Avg Aggregation","text":"<p>The avg aggregation is a single-value metrics aggregation that computes the average of numeric values extracted from the aggregated documents.</p>"},{"location":"avg_aggregation/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    avg \"github.com/sdqri/effdsl/v2/aggregations/metrics/avg\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        avg.Avg(\n            \"avg_price\",\n            \"price\",\n            avg.WithMissing(0),\n            avg.WithFormat(\"0.00\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"avg_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to average. Required when script is not set.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output value.</p> </li> <li> <p>WithValueType (string) (Optional, functional option) Hint about the value type for scripted metrics.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"avg_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the avg aggregation and its parameters, refer to the official Elasticsearch documentation on avg aggregation.</p>"},{"location":"avg_bucket_aggregation/","title":"Avg Bucket Aggregation","text":"<p>The avg bucket aggregation calculates the average of a bucketed metric.</p>"},{"location":"avg_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    avgbucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/avgbucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        avgbucket.AvgBucket(\n            \"avg_monthly_sales\",\n            \"sales_per_month&gt;sales\",\n            avgbucket.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"avg_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"avg_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the avg bucket aggregation and its parameters, refer to the official Elasticsearch documentation on avg bucket aggregation.</p>"},{"location":"bool_query/","title":"Boolean Query","text":"<p>A query that matches documents based on boolean combinations of other queries. The bool query maps to Lucene BooleanQuery. It is constructed using one or more boolean clauses, each with a specific occurrence type. The occurrence types are:</p>"},{"location":"bool_query/#occur-types","title":"Occur Types","text":"<ul> <li> <p>must   The clause (query) must appear in matching documents and will contribute to the score.</p> </li> <li> <p>filter   The clause (query) must appear in matching documents. Unlike must, the score of the query will be ignored. Filter clauses are executed in filter context, meaning that scoring is ignored and clauses are considered for caching.</p> </li> <li> <p>should   The clause (query) should appear in the matching document.</p> </li> <li> <p>must_not   The clause (query) must not appear in the matching documents. Clauses are executed in filter context, meaning that scoring is ignored and clauses are considered for caching. Because scoring is ignored, a score of 0 for all documents is returned.</p> </li> </ul> <p>The bool query adopts a more-matches-is-better approach, so the score from each matching must or should clause will be added together to provide the final _score for each document.</p>"},{"location":"bool_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mq \"github.com/sdqri/effdsl/queries/matchquery\"\n    bq \"github.com/sdqri/effdsl/queries/boolquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        bq.BoolQuery(\n            bq.Must(mq.MatchQuery(effdsl.M{\"user.name\": \"john_doe\"})),\n            bq.Must(mq.MatchQuery(\"post.status\": \"published\")),\n            bq.Filter(mq.MatchQuery(\"category\": \"technology\")),\n            bq.Filter(mq.MatchQuery(\"tags\": \"go\")),\n            bq.Should(mq.MatchQuery(\"title\": \"elasticsearch\")),\n            bq.Should(mq.MatchQuery(\"content\": \"search optimization\")),\n            bq.MustNot(mq.MatchQuery(\"user.role\": \"banned\")),\n            bq.MustNot(mq.MatchQuery(\"status\": \"draft\")),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"bool_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Must(query) (Optional, Functional option) The clause must appear in matching documents and will contribute to the score.</p> </li> <li> <p>Filter(query) (Optional, Functional option) The clause must appear in matching documents. Unlike must, the score of the query will be ignored. Filter clauses are executed in filter context, meaning that scoring is ignored and clauses are considered for caching.</p> </li> <li> <p>Should(query) (Optional, Functional option) The clause should appear in the matching document.</p> </li> <li> <p>MustNot(query) (Optional, Functional option) The clause must not appear in the matching documents. Clauses are executed in filter context, meaning that scoring is ignored and clauses are considered for caching. Because scoring is ignored, a score of 0 for all documents is returned.</p> </li> <li> <p>WithMinimumShouldMatch(string) (Optional, Functional option) Minimum number of clauses that must match for a document to be returned.</p> </li> </ul>"},{"location":"bool_query/#additional-information","title":"Additional Information","text":"<p>For more details on the boolean query and its parameters, refer to the official Elasticsearch documentation on bool queries.</p>"},{"location":"boosting_query/","title":"Boosting Query","text":"<p>A boosting query matches documents based on a positive query while reducing the relevance score of documents that also match a negative query. This type of query is useful for situations where you want to boost the relevance of documents that match a primary condition but penalize documents that match a secondary, less desired condition. The boosting query is constructed using a positive query, a negative query, and a negative boost factor.</p>"},{"location":"boosting_query/#example","title":"Example","text":"<p><pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    bq \"github.com/sdqri/effdsl/queries/boostingquery\"\n    tq \"github.com/sdqri/effdsl/queries/termquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        bq.BoostingQuery(\n            tq.TermQuery(\"text\", \"apple\"),\n            tq.TermQuery(\"text\", \"pie tart fruit crumble tree\"),\n            0.5),\n    ), \n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre> Positional requierd parameters</p>"},{"location":"boosting_query/#parameters","title":"Parameters","text":""},{"location":"boosting_query/#parameters_1","title":"Parameters","text":"<ul> <li> <p>Positive (Query) (Required, positional) The query that documents must match to be considered for inclusion in the results.</p> </li> <li> <p>Negative (Query) (Required, positional) The query object used to reduce the relevance score of documents matching this query.</p> </li> <li> <p>NegativeBoost (float64) (Required, positional) A floating-point number between 0 and 1.0 used to decrease the relevance scores of documents matching the negative query.</p> </li> </ul>"},{"location":"boosting_query/#additional-information","title":"Additional Information","text":"<p>For more details on the boosting query and its parameters, refer to the official Elasticsearch documentation on boosting queries.</p>"},{"location":"boxplot_aggregation/","title":"Boxplot Aggregation","text":"<p>The boxplot aggregation is a metrics aggregation that computes boxplot values (min, max, median, and quartiles) from numeric values in the aggregated documents.</p>"},{"location":"boxplot_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    boxplot \"github.com/sdqri/effdsl/v2/aggregations/metrics/boxplot\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        boxplot.Boxplot(\n            \"load_time_boxplot\",\n            \"load_time\",\n            boxplot.WithCompression(200),\n            boxplot.WithExecutionHint(\"high_accuracy\"),\n            boxplot.WithMissing(10),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"boxplot_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute the boxplot on.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithCompression (int) (Optional, functional option) Compression factor controlling accuracy vs. memory usage.</p> </li> <li> <p>WithExecutionHint (string) (Optional, functional option) Execution hint for the TDigest implementation (for example, <code>high_accuracy</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"boxplot_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the boxplot aggregation and its parameters, refer to the official Elasticsearch documentation on boxplot aggregation.</p>"},{"location":"bucket_correlation_aggregation/","title":"Bucket Correlation Aggregation","text":"<p>The bucket correlation aggregation computes correlations using bucket counts and an indicator.</p>"},{"location":"bucket_correlation_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    bucketcorrelation \"github.com/sdqri/effdsl/v2/aggregations/pipeline/bucketcorrelation\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        bucketcorrelation.BucketCorrelation(\n            \"bucket_correlation\",\n            \"latency_ranges&gt;_count\",\n            bucketcorrelation.CountCorrelation(\n                []float64{0, 52.5, 165, 335, 555},\n                200,\n                nil,\n            ),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"bucket_correlation_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the <code>_count</code> buckets.</p> </li> <li> <p>Function (BucketCorrelationFunction) (Required, positional) Correlation function configuration.</p> </li> <li> <p>CountCorrelation (expectations []float64, docCount int, fractions []float64) (Helper) Builds a <code>count_correlation</code> function with indicator expectations, total doc count, and optional fractions.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"bucket_correlation_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the bucket correlation aggregation and its parameters, refer to the official Elasticsearch documentation on bucket correlation aggregation.</p>"},{"location":"bucket_count_ks_test_aggregation/","title":"Bucket Count K-S Test Aggregation","text":"<p>The bucket count K-S test aggregation compares bucket counts to a provided distribution.</p>"},{"location":"bucket_count_ks_test_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    bucketcountkstest \"github.com/sdqri/effdsl/v2/aggregations/pipeline/bucketcountkstest\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        bucketcountkstest.BucketCountKSTest(\n            \"ks_test\",\n            \"latency_ranges&gt;_count\",\n            bucketcountkstest.WithAlternatives([]string{\"less\", \"greater\", \"two_sided\"}),\n            bucketcountkstest.WithSamplingMethod(\"upper_tail\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"bucket_count_ks_test_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the <code>_count</code> buckets.</p> </li> <li> <p>WithAlternatives ([]string) (Optional, functional option) Alternatives (<code>greater</code>, <code>less</code>, <code>two_sided</code>).</p> </li> <li> <p>WithFractions ([]float64) (Optional, functional option) Expected distribution fractions.</p> </li> <li> <p>WithSamplingMethod (string) (Optional, functional option) Sampling method (<code>upper_tail</code>, <code>uniform</code>, <code>lower_tail</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"bucket_count_ks_test_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the bucket count K-S test aggregation and its parameters, refer to the official Elasticsearch documentation on bucket count K-S test aggregation.</p>"},{"location":"bucket_script_aggregation/","title":"Bucket Script Aggregation","text":"<p>The bucket script aggregation executes a script over bucketed metrics.</p>"},{"location":"bucket_script_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    \"github.com/sdqri/effdsl/v2/aggregations\"\n    bucketscript \"github.com/sdqri/effdsl/v2/aggregations/pipeline/bucketscript\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        bucketscript.BucketScript(\n            \"sales_profit\",\n            map[string]string{\n                \"total_sales\": \"sales_per_month&gt;sales\",\n                \"total_cost\":  \"sales_per_month&gt;cost\",\n            },\n            aggregations.Script{Source: \"params.total_sales - params.total_cost\"},\n            bucketscript.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"bucket_script_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (map[string]string) (Required, positional) Map of variables to bucketed metric paths.</p> </li> <li> <p>Script (Script) (Required, positional) Script that computes the value.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"bucket_script_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the bucket script aggregation and its parameters, refer to the official Elasticsearch documentation on bucket script aggregation.</p>"},{"location":"bucket_selector_aggregation/","title":"Bucket Selector Aggregation","text":"<p>The bucket selector aggregation filters buckets based on a script.</p>"},{"location":"bucket_selector_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    \"github.com/sdqri/effdsl/v2/aggregations\"\n    bucketselector \"github.com/sdqri/effdsl/v2/aggregations/pipeline/bucketselector\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        bucketselector.BucketSelector(\n            \"only_profitable\",\n            map[string]string{\n                \"total_sales\": \"sales_per_month&gt;sales\",\n                \"total_cost\":  \"sales_per_month&gt;cost\",\n            },\n            aggregations.Script{Source: \"params.total_sales &gt; params.total_cost\"},\n            bucketselector.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"bucket_selector_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (map[string]string) (Required, positional) Map of variables to bucketed metric paths.</p> </li> <li> <p>Script (Script) (Required, positional) Script that returns a boolean for bucket selection.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"bucket_selector_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the bucket selector aggregation and its parameters, refer to the official Elasticsearch documentation on bucket selector aggregation.</p>"},{"location":"bucket_sort_aggregation/","title":"Bucket Sort Aggregation","text":"<p>The bucket sort aggregation sorts and optionally truncates buckets from its parent aggregation.</p>"},{"location":"bucket_sort_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    bucketsort \"github.com/sdqri/effdsl/v2/aggregations/pipeline/bucketsort\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        bucketsort.BucketSort(\n            \"sales_bucket_sort\",\n            bucketsort.WithSort([]any{\n                map[string]any{\"total_sales\": map[string]any{\"order\": \"desc\"}},\n            }),\n            bucketsort.WithSize(3),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"bucket_sort_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithSort ([]any) (Optional, functional option) List of sort clauses for the buckets.</p> </li> <li> <p>WithFrom (int) (Optional, functional option) Buckets in positions prior to this value will be truncated.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Number of buckets to return.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"bucket_sort_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the bucket sort aggregation and its parameters, refer to the official Elasticsearch documentation on bucket sort aggregation.</p>"},{"location":"cardinality_aggregation/","title":"Cardinality Aggregation","text":"<p>The cardinality aggregation is a single-value metrics aggregation that calculates an approximate count of distinct values.</p>"},{"location":"cardinality_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    cardinality \"github.com/sdqri/effdsl/v2/aggregations/metrics/cardinality\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        cardinality.Cardinality(\n            \"type_count\",\n            \"type\",\n            cardinality.WithPrecisionThreshold(100),\n            cardinality.WithExecutionHint(\"save_time_heuristic\"),\n            cardinality.WithMissing(\"N/A\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"cardinality_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to count distinct values for.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithPrecisionThreshold (int) (Optional, functional option) Precision threshold that trades memory for accuracy.</p> </li> <li> <p>WithExecutionHint (string) (Optional, functional option) Execution mode hint (for example, <code>save_time_heuristic</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"cardinality_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the cardinality aggregation and its parameters, refer to the official Elasticsearch documentation on cardinality aggregation.</p>"},{"location":"cartesian_bounds_aggregation/","title":"Cartesian-bounds Aggregation","text":"<p>The cartesian-bounds aggregation computes the spatial bounding box containing all values for a point or shape field.</p>"},{"location":"cartesian_bounds_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    cartesianbounds \"github.com/sdqri/effdsl/v2/aggregations/metrics/cartesianbounds\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        cartesianbounds.CartesianBounds(\n            \"viewport\",\n            \"location\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"cartesian_bounds_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Point or shape field to compute bounds for.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"cartesian_bounds_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the cartesian-bounds aggregation and its parameters, refer to the official Elasticsearch documentation on cartesian-bounds aggregation.</p>"},{"location":"cartesian_centroid_aggregation/","title":"Cartesian-centroid Aggregation","text":"<p>The cartesian-centroid aggregation computes the weighted centroid from all coordinate values for point or shape fields.</p>"},{"location":"cartesian_centroid_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    cartesiancentroid \"github.com/sdqri/effdsl/v2/aggregations/metrics/cartesiancentroid\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        cartesiancentroid.CartesianCentroid(\n            \"centroid\",\n            \"location\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"cartesian_centroid_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Point or shape field to compute centroid for.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"cartesian_centroid_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the cartesian-centroid aggregation and its parameters, refer to the official Elasticsearch documentation on cartesian-centroid aggregation.</p>"},{"location":"change_point_aggregation/","title":"Change Point Aggregation","text":"<p>The change point aggregation detects significant changes in bucketed values.</p>"},{"location":"change_point_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    changepoint \"github.com/sdqri/effdsl/v2/aggregations/pipeline/changepoint\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        changepoint.ChangePoint(\n            \"change_points_avg\",\n            \"date&gt;avg\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"change_point_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"change_point_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the change point aggregation and its parameters, refer to the official Elasticsearch documentation on change point aggregation.</p>"},{"location":"children_aggregation/","title":"Children Aggregation","text":"<p>The children aggregation selects child documents from parent documents.</p>"},{"location":"children_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    children \"github.com/sdqri/effdsl/v2/aggregations/bucket/children\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        children.Children(\n            \"to_children\",\n            \"child\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"children_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Child Type (string) (Required, positional) Child type.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"children_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the children aggregation and its parameters, refer to the official Elasticsearch documentation on children aggregation.</p>"},{"location":"completion_suggester/","title":"Completion Suggester","text":"<p>The completion suggester provides auto-complete or search-as-you-type functionality. It can return suggestions based on a prefix or a regular expression and supports filtering or boosting with contexts.</p>"},{"location":"completion_suggester/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    cs \"github.com/sdqri/effdsl/suggesters/completionsuggester\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithSuggest(\n        cs.CompletionSuggester(\n            \"song-suggest\",\n            \"nir\",\n            \"suggest\",\n            cs.WithSize(10),\n            cs.WithCompletionSuggesterSkipDuplicates(true),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"completion_suggester/#parameters","title":"Parameters","text":"<ul> <li>SuggestName (string) (Required, positional) Name used to identify the suggestion in the response.</li> <li>Prefix (string) (Required, positional) Prefix text used to generate suggestions. Use <code>CompletionSuggesterRegex</code> for regex input.</li> <li>Field (string) (Required, positional) Completion field from which to fetch suggestions.</li> <li>WithSize(uint64) (Optional, Functional option) Number of suggestions to return. Defaults to 5.</li> <li>WithCompletionSuggesterSkipDuplicates(bool) (Optional, Functional option) Whether duplicate suggestions should be filtered out.</li> <li>WithCompletionSuggesterFuzzy(opt ...FuzzyOption) (Optional, Functional option) Enables fuzzy prefix matching. <code>FuzzyOption</code> functions allow setting fuzziness, prefix length and other parameters.</li> <li>WithRegexFlags(RegexFlag) (Optional, Functional option) Regex flags used with <code>CompletionSuggesterRegex</code>.</li> <li>WithMaxDeterminizedStates(int64) (Optional, Functional option) Maximum allowed states for regex completion.</li> <li>WithMultipleCategoryContext(name, contexts ...string) (Optional, Functional option) Adds category contexts used for filtering or boosting suggestions.</li> <li>WithCategoryContext(name, context string, opts ...CategoryContextClauseOption) (Optional, Functional option) Adds a single category context with optional boost or prefix.</li> <li>WithGeoContext(name string, lat, lon float64, opts ...GeoContextClauseOption) (Optional, Functional option) Adds a geo context for location based suggestions.</li> </ul>"},{"location":"completion_suggester/#additional-information","title":"Additional Information","text":"<p>For more details on the completion suggester and its parameters, refer to the official Elasticsearch documentation on completion suggesters.</p>"},{"location":"composite_aggregation/","title":"Composite Aggregation","text":"<p>The composite aggregation creates buckets from multiple sources for pagination.</p>"},{"location":"composite_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    composite \"github.com/sdqri/effdsl/v2/aggregations/bucket/composite\"\n)\n\nsources := []any{\n    map[string]any{\"date\": map[string]any{\"date_histogram\": map[string]any{\"field\": \"date\", \"calendar_interval\": \"month\"}}},\n    map[string]any{\"type\": map[string]any{\"terms\": map[string]any{\"field\": \"type\"}}},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        composite.Composite(\n            \"buckets\",\n            sources,\n            composite.WithSize(1000),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"composite_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Sources ([]any) (Required, positional) List of composite sources.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Number of buckets to return.</p> </li> <li> <p>WithAfter (map[string]any) (Optional, functional option) Pagination key.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"composite_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the composite aggregation and its parameters, refer to the official Elasticsearch documentation on composite aggregation.</p>"},{"location":"constant_score/","title":"Constant Score Query","text":"<p>A constant score query wraps a filter query and returns every matching document with a relevance score equal to the boost parameter value. This query type is useful when you want to apply a uniform score to all documents that match a specific filter query.</p>"},{"location":"constant_score/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    csq \"github.com/sdqri/effdsl/queries/constantscore\"\n    tq \"github.com/sdqri/effdsl/queries/termquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        csq.ConstantScoreQuery(\n            tq.TermQuery(\"user.id\", \"kimchy\"),\n            1.2),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"constant_score/#parameters","title":"Parameters","text":"<ul> <li> <p>Filter (effdsl.Query) (Required, positional) The query object that documents must match. This is a required parameter.</p> </li> <li> <p>Boost (float64) (Required, positional) A floating-point number used as the constant relevance score for every document matching the filter query. This is a required parameter and defaults to 1.0 if not specified.</p> </li> </ul>"},{"location":"constant_score/#additional-information","title":"Additional Information","text":"<p>For more details on the constant score query and its parameters, refer to the official Elasticsearch documentation on constant score queries.</p>"},{"location":"cumulative_cardinality_aggregation/","title":"Cumulative Cardinality Aggregation","text":"<p>The cumulative cardinality aggregation computes the cumulative cardinality of a metric across buckets.</p>"},{"location":"cumulative_cardinality_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    cumulativecardinality \"github.com/sdqri/effdsl/v2/aggregations/pipeline/cumulativecardinality\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        cumulativecardinality.CumulativeCardinality(\n            \"total_new_users\",\n            \"distinct_users\",\n            cumulativecardinality.WithFormat(\"0\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"cumulative_cardinality_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the cardinality aggregation.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"cumulative_cardinality_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the cumulative cardinality aggregation and its parameters, refer to the official Elasticsearch documentation on cumulative cardinality aggregation.</p>"},{"location":"cumulative_sum_aggregation/","title":"Cumulative Sum Aggregation","text":"<p>The cumulative sum aggregation computes the cumulative sum of a metric across buckets.</p>"},{"location":"cumulative_sum_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    cumulativesum \"github.com/sdqri/effdsl/v2/aggregations/pipeline/cumulativesum\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        cumulativesum.CumulativeSum(\n            \"cumulative_sales\",\n            \"sales\",\n            cumulativesum.WithFormat(\"0.00\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"cumulative_sum_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"cumulative_sum_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the cumulative sum aggregation and its parameters, refer to the official Elasticsearch documentation on cumulative sum aggregation.</p>"},{"location":"date_histogram_aggregation/","title":"Date Histogram Aggregation","text":"<p>The date histogram aggregation buckets documents by date intervals.</p>"},{"location":"date_histogram_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    datehistogram \"github.com/sdqri/effdsl/v2/aggregations/bucket/datehistogram\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        datehistogram.DateHistogram(\n            \"sales_over_time\",\n            \"date\",\n            datehistogram.WithCalendarInterval(\"month\"),\n            datehistogram.WithMinDocCount(0),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"date_histogram_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Date field to bucket on.</p> </li> <li> <p>WithCalendarInterval (string) (Optional, functional option) Calendar interval (<code>day</code>, <code>month</code>, etc.).</p> </li> <li> <p>WithFixedInterval (string) (Optional, functional option) Fixed interval (<code>1h</code>, <code>10m</code>, etc.).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format for bucket keys.</p> </li> <li> <p>WithTimeZone (string) (Optional, functional option) Time zone for rounding.</p> </li> <li> <p>WithOffset (string) (Optional, functional option) Offset for bucket boundaries.</p> </li> <li> <p>WithOrder (map[string]any) (Optional, functional option) Order for buckets.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Return buckets as a keyed object.</p> </li> <li> <p>WithMinDocCount (int) (Optional, functional option) Minimum document count.</p> </li> <li> <p>WithExtendedBounds (map[string]any) (Optional, functional option) Extended bounds for buckets.</p> </li> <li> <p>WithHardBounds (map[string]any) (Optional, functional option) Hard bounds for buckets.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"date_histogram_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the date histogram aggregation and its parameters, refer to the official Elasticsearch documentation on date histogram aggregation.</p>"},{"location":"date_range_aggregation/","title":"Date Range Aggregation","text":"<p>The date range aggregation buckets documents into date ranges.</p>"},{"location":"date_range_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    daterange \"github.com/sdqri/effdsl/v2/aggregations/bucket/daterange\"\n)\n\nranges := []daterange.DateRangeItem{\n    {To: \"now-1M/M\"},\n    {From: \"now-1M/M\"},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        daterange.DateRange(\n            \"recent\",\n            \"date\",\n            ranges,\n            daterange.WithTimeZone(\"UTC\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"date_range_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Date field to bucket on.</p> </li> <li> <p>Ranges ([]DateRangeItem) (Required, positional) Ranges to bucket into.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format for bucket keys.</p> </li> <li> <p>WithTimeZone (string) (Optional, functional option) Time zone for rounding.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"date_range_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the date range aggregation and its parameters, refer to the official Elasticsearch documentation on date range aggregation.</p>"},{"location":"derivative_aggregation/","title":"Derivative Aggregation","text":"<p>The derivative aggregation calculates the derivative of a metric across buckets.</p>"},{"location":"derivative_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    derivative \"github.com/sdqri/effdsl/v2/aggregations/pipeline/derivative\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        derivative.Derivative(\n            \"sales_deriv\",\n            \"sales\",\n            derivative.WithGapPolicy(\"skip\"),\n            derivative.WithUnit(\"day\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"derivative_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithUnit (string) (Optional, functional option) Unit for the x-axis of the derivative calculation.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"derivative_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the derivative aggregation and its parameters, refer to the official Elasticsearch documentation on derivative aggregation.</p>"},{"location":"dis_max_query/","title":"Disjunction Max Query","text":"<p>A disjunction max query (dis_max) is used to find documents that match multiple query clauses. The query returns documents that match any of the provided queries, and the relevance score is determined based on the best match. This query is useful for combining multiple queries into one and adjusting their scores with a tie-breaker.</p>"},{"location":"dis_max_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    dmq \"github.com/sdqri/effdsl/queries/dismaxquery\"\n    tq \"github.com/sdqri/effdsl/queries/termquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        dmq.DisMaxQuery(\n            []effdsl.QueryResult{\n                tq.TermQuery(\"title\", \"Quick pets\"),\n                tq.TermQuery(\"body\", \"Quick pets\"),\n            },\n            dmq.WithTieBreaker(0.7),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"dis_max_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Queries ([]query) (Required, positional) An array of query objects that documents must match. This is a required parameter.</p> </li> <li> <p>WithTieBreaker (float64) (Optional, Functional option) A floating-point number used to adjust the relevance scores when multiple queries match. This is an optional parameter.</p> </li> </ul>"},{"location":"dis_max_query/#additional-information","title":"Additional Information","text":"<p>For more details on the disjunction max query and its parameters, refer to the official Elasticsearch documentation on dis_max queries.</p>"},{"location":"diversified_sampler_aggregation/","title":"Diversified Sampler Aggregation","text":"<p>The diversified sampler aggregation limits documents per value to reduce bias.</p>"},{"location":"diversified_sampler_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    diversifiedsampler \"github.com/sdqri/effdsl/v2/aggregations/bucket/diversifiedsampler\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        diversifiedsampler.DiversifiedSampler(\n            \"sample\",\n            diversifiedsampler.WithField(\"user_id\"),\n            diversifiedsampler.WithShardSize(200),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"diversified_sampler_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for sampling.</p> </li> <li> <p>WithField (string) (Optional, functional option) Field used to diversify results.</p> </li> <li> <p>WithMaxDocsPerValue (int) (Optional, functional option) Max docs per value.</p> </li> <li> <p>WithExecutionHint (string) (Optional, functional option) Execution hint.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"diversified_sampler_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the diversified sampler aggregation and its parameters, refer to the official Elasticsearch documentation on diversified sampler aggregation.</p>"},{"location":"exists_query/","title":"Exists Query","text":"<p>An exists query returns documents that contain an indexed value for a specified field. This query is useful for checking if a document contains a specific field.</p>"},{"location":"exists_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    eq \"github.com/sdqri/effdsl/queries/existsquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        eq.ExistsQuery(\"field_name\"),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"exists_query/#parameters","title":"Parameters","text":"<ul> <li>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</li> </ul>"},{"location":"exists_query/#additional-information","title":"Additional Information","text":"<p>For more details on the exists query and its parameters, refer to the official Elasticsearch documentation on exists queries.</p>"},{"location":"extended_stats_aggregation/","title":"Extended Stats Aggregation","text":"<p>The extended stats aggregation is a multi-value metrics aggregation that computes statistics over numeric values from the aggregated documents.</p>"},{"location":"extended_stats_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    extendedstats \"github.com/sdqri/effdsl/v2/aggregations/metrics/extendedstats\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        extendedstats.ExtendedStats(\n            \"grades_stats\",\n            \"grade\",\n            extendedstats.WithSigma(3),\n            extendedstats.WithMissing(0),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"extended_stats_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute stats for. Required when script is not set.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output values.</p> </li> <li> <p>WithSigma (float64) (Optional, functional option) Sigma value used to compute standard deviation bounds.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"extended_stats_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the extended stats aggregation and its parameters, refer to the official Elasticsearch documentation on extended stats aggregation.</p>"},{"location":"extended_stats_bucket_aggregation/","title":"Extended Stats Bucket Aggregation","text":"<p>The extended stats bucket aggregation computes extended statistics across buckets.</p>"},{"location":"extended_stats_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    extendedstatsbucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/extendedstatsbucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        extendedstatsbucket.ExtendedStatsBucket(\n            \"stats_monthly_sales\",\n            \"sales_per_month&gt;sales\",\n            extendedstatsbucket.WithSigma(2.0),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"extended_stats_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSigma (float64) (Optional, functional option) Number of standard deviations above/below the mean.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"extended_stats_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the extended stats bucket aggregation and its parameters, refer to the official Elasticsearch documentation on extended stats bucket aggregation.</p>"},{"location":"filter_aggregation/","title":"Filter Aggregation","text":"<p>The filter aggregation is a single-bucket aggregation that matches documents using a filter.</p>"},{"location":"filter_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    filter \"github.com/sdqri/effdsl/v2/aggregations/bucket/filter\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        filter.Filter(\n            \"errors\",\n            map[string]any{\"term\": map[string]any{\"status\": \"error\"}},\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"filter_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Filter (any) (Required, positional) Filter query.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"filter_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the filter aggregation and its parameters, refer to the official Elasticsearch documentation on filter aggregation.</p>"},{"location":"filters_aggregation/","title":"Filters Aggregation","text":"<p>The filters aggregation is a multi-bucket aggregation where each bucket is defined by a filter.</p>"},{"location":"filters_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    filters \"github.com/sdqri/effdsl/v2/aggregations/bucket/filters\"\n)\n\nfiltersMap := map[string]any{\n    \"errors\": map[string]any{\"term\": map[string]any{\"status\": \"error\"}},\n    \"warnings\": map[string]any{\"term\": map[string]any{\"status\": \"warning\"}},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        filters.Filters(\n            \"statuses\",\n            filtersMap,\n            filters.WithOtherBucket(true),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"filters_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Filters (any) (Required, positional) Filters definition (map or array).</p> </li> <li> <p>WithOtherBucket (bool) (Optional, functional option) Include an \"other\" bucket.</p> </li> <li> <p>WithOtherBucketKey (string) (Optional, functional option) Key for the \"other\" bucket.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Return buckets as a keyed object.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"filters_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the filters aggregation and its parameters, refer to the official Elasticsearch documentation on filters aggregation.</p>"},{"location":"fuzzy_query/","title":"Fuzzy Query","text":"<p>Returns documents that contain terms similar to the search term, as measured by a Levenshtein edit distance.</p> <p>An edit distance is the number of one-character changes needed to turn one term into another. These changes can include:</p> <ul> <li>Changing a character (e.g., <code>box</code> \u2192 <code>fox</code>)</li> <li>Removing a character (e.g., <code>black</code> \u2192 <code>lack</code>)</li> <li>Inserting a character (e.g., <code>sic</code> \u2192 <code>sick</code>)</li> <li>Transposing two adjacent characters (e.g., <code>act</code> \u2192 <code>cat</code>)</li> </ul> <p>To find similar terms, the fuzzy query creates a set of all possible variations, or expansions, of the search term within a specified edit distance. The query then returns exact matches for each expansion.</p>"},{"location":"fuzzy_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    eq \"github.com/sdqri/effdsl/queries/existsquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        fq.FuzzyQuery(\n            \"user.id\",\n            \"ki\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"fuzzy_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Value (string) (Required, positional) The term you wish to find in the provided field. This is a required parameter.</p> </li> <li> <p>WithFuzziness (string) (Optional, Functional option) The degree of fuzziness allowed for the search term (e.g., \"AUTO\", \"1\", \"2\", etc.). Defaults to no fuzziness.</p> </li> <li> <p>WithMaxExpansions (int) (Optional, Functional option) Maximum number of terms to match. Defaults to 50.</p> </li> <li> <p>WithPrefixLength (int) (Optional, Functional option) Number of initial characters that must match exactly. Defaults to 0.</p> </li> <li> <p>WithTranspositions (bool) (Optional, Functional option) If true, allows transpositions of two adjacent characters. Defaults to true.</p> </li> <li> <p>WithRewrite (Rewrite) (Optional, Functional option) Method used to rewrite the query. Valid values are:</p> <ul> <li><code>constant_score</code>: Query is rewritten to a constant score query.</li> <li><code>scoring_boolean</code>: Query is rewritten to a scoring boolean query.</li> <li><code>constant_score_boolean</code>: Query is rewritten to a constant score boolean query.</li> <li><code>top_terms_N</code>: Query is rewritten to match the top N scoring terms.</li> <li><code>top_terms_boost_N</code>: Query is rewritten to match the top N scoring terms with boosting.</li> <li><code>top_terms_blended_freqs_N</code>: Query is rewritten to match the top N scoring terms with blended frequencies.</li> </ul> </li> </ul>"},{"location":"fuzzy_query/#additional-information","title":"Additional Information","text":"<p>For more details on the fuzzy query and its parameters, refer to the official Elasticsearch documentation on fuzzy queries.</p>"},{"location":"geo_bounds_aggregation/","title":"Geo-bounds Aggregation","text":"<p>The geo-bounds aggregation computes the geographic bounding box that contains all values for a geo_point or geo_shape field.</p>"},{"location":"geo_bounds_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    geobounds \"github.com/sdqri/effdsl/v2/aggregations/metrics/geobounds\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        geobounds.GeoBounds(\n            \"viewport\",\n            \"location\",\n            geobounds.WithWrapLongitude(true),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"geo_bounds_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Geo field to compute bounds for.</p> </li> <li> <p>WithWrapLongitude (bool) (Optional, functional option) Whether to wrap longitudes to the -180..180 range.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"geo_bounds_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the geo-bounds aggregation and its parameters, refer to the official Elasticsearch documentation on geo-bounds aggregation.</p>"},{"location":"geo_centroid_aggregation/","title":"Geo-centroid Aggregation","text":"<p>The geo-centroid aggregation computes the weighted centroid from all coordinate values for geo_point or geo_shape fields.</p>"},{"location":"geo_centroid_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    geocentroid \"github.com/sdqri/effdsl/v2/aggregations/metrics/geocentroid\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        geocentroid.GeoCentroid(\n            \"centroid\",\n            \"location\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"geo_centroid_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Geo field to compute centroid for.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"geo_centroid_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the geo-centroid aggregation and its parameters, refer to the official Elasticsearch documentation on geo-centroid aggregation.</p>"},{"location":"geo_distance_aggregation/","title":"Geo Distance Aggregation","text":"<p>The geo distance aggregation buckets documents into distance ranges from an origin point.</p>"},{"location":"geo_distance_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    geodistance \"github.com/sdqri/effdsl/v2/aggregations/bucket/geodistance\"\n)\n\nto100 := 100.0\nfrom100 := 100.0\nto300 := 300.0\nfrom300 := 300.0\n\nranges := []geodistance.GeoDistanceRange{\n    {To: &amp;to100},\n    {From: &amp;from100, To: &amp;to300},\n    {From: &amp;from300},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        geodistance.GeoDistance(\n            \"rings\",\n            \"location\",\n            \"52.3760, 4.894\",\n            ranges,\n            geodistance.WithUnit(\"km\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"geo_distance_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Geo field to bucket on.</p> </li> <li> <p>Origin (any) (Required, positional) Origin point for distance calculation.</p> </li> <li> <p>Ranges ([]GeoDistanceRange) (Required, positional) Distance ranges.</p> </li> <li> <p>WithUnit (string) (Optional, functional option) Distance unit (e.g., <code>km</code>).</p> </li> <li> <p>WithDistanceType (string) (Optional, functional option) Distance type (e.g., <code>arc</code>).</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Return buckets as a keyed object.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"geo_distance_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the geo distance aggregation and its parameters, refer to the official Elasticsearch documentation on geo distance aggregation.</p>"},{"location":"geo_line_aggregation/","title":"Geo-line Aggregation","text":"<p>The geo-line aggregation aggregates geo_point values within a bucket into a LineString ordered by a sort field.</p>"},{"location":"geo_line_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    geoline \"github.com/sdqri/effdsl/v2/aggregations/metrics/geoline\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        geoline.GeoLine(\n            \"line\",\n            \"my_location\",\n            geoline.WithSortField(\"@timestamp\"),\n            geoline.WithIncludeSort(true),\n            geoline.WithSortOrder(\"ASC\"),\n            geoline.WithSize(10000),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"geo_line_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Point Field (string) (Optional, positional) Geo point field to build the line from.</p> </li> <li> <p>WithSortField (string) (Optional, functional option) Field used to order points in the line.</p> </li> <li> <p>WithIncludeSort (bool) (Optional, functional option) Include sort values in the feature properties.</p> </li> <li> <p>WithSortOrder (string) (Optional, functional option) Sort order for the line, <code>ASC</code> or <code>DESC</code>.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Maximum number of points in the line.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"geo_line_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the geo-line aggregation and its parameters, refer to the official Elasticsearch documentation on geo-line aggregation.</p>"},{"location":"geo_tile_grid_aggregation/","title":"Geo-tile Grid Aggregation","text":"<p>The geo-tile grid aggregation buckets geo points into map tile grid cells.</p>"},{"location":"geo_tile_grid_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    geotilegrid \"github.com/sdqri/effdsl/v2/aggregations/bucket/geotilegrid\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        geotilegrid.GeoTileGrid(\n            \"tiles\",\n            \"location\",\n            7,\n            geotilegrid.WithSize(10000),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"geo_tile_grid_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Geo field to bucket on.</p> </li> <li> <p>Precision (int) (Required, positional) Tile precision.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Maximum number of buckets.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for bucket collection.</p> </li> <li> <p>WithBounds (map[string]any) (Optional, functional option) Bounding box for grid.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"geo_tile_grid_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the geo-tile grid aggregation and its parameters, refer to the official Elasticsearch documentation on geo-tile grid aggregation.</p>"},{"location":"geohash_grid_aggregation/","title":"Geohash Grid Aggregation","text":"<p>The geohash grid aggregation buckets geo points into geohash grid cells.</p>"},{"location":"geohash_grid_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    geohashgrid \"github.com/sdqri/effdsl/v2/aggregations/bucket/geohashgrid\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        geohashgrid.GeoHashGrid(\n            \"grid\",\n            \"location\",\n            5,\n            geohashgrid.WithSize(10000),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"geohash_grid_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Geo field to bucket on.</p> </li> <li> <p>Precision (int) (Required, positional) Geohash precision.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Maximum number of buckets.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for bucket collection.</p> </li> <li> <p>WithBounds (map[string]any) (Optional, functional option) Bounding box for grid.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"geohash_grid_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the geohash grid aggregation and its parameters, refer to the official Elasticsearch documentation on geohash grid aggregation.</p>"},{"location":"geohex_grid_aggregation/","title":"Geohex Grid Aggregation","text":"<p>The geohex grid aggregation buckets geo points into H3 hexagonal grid cells.</p>"},{"location":"geohex_grid_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    geohexgrid \"github.com/sdqri/effdsl/v2/aggregations/bucket/geohexgrid\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        geohexgrid.GeoHexGrid(\n            \"hexes\",\n            \"location\",\n            5,\n            geohexgrid.WithSize(10000),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"geohex_grid_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Geo field to bucket on.</p> </li> <li> <p>Precision (int) (Required, positional) H3 precision.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Maximum number of buckets.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for bucket collection.</p> </li> <li> <p>WithBounds (map[string]any) (Optional, functional option) Bounding box for grid.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"geohex_grid_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the geohex grid aggregation and its parameters, refer to the official Elasticsearch documentation on geohex grid aggregation.</p>"},{"location":"global_aggregation/","title":"Global Aggregation","text":"<p>The global aggregation creates a single bucket for all documents in the index.</p>"},{"location":"global_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    global \"github.com/sdqri/effdsl/v2/aggregations/bucket/global\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        global.Global(\"all_docs\"),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"global_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"global_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the global aggregation and its parameters, refer to the official Elasticsearch documentation on global aggregation.</p>"},{"location":"histogram_aggregation/","title":"Histogram Aggregation","text":"<p>The histogram aggregation buckets numeric values into fixed-size intervals.</p>"},{"location":"histogram_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    histogram \"github.com/sdqri/effdsl/v2/aggregations/bucket/histogram\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        histogram.Histogram(\n            \"prices\",\n            \"price\",\n            50,\n            histogram.WithMinDocCount(0),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"histogram_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to bucket on.</p> </li> <li> <p>Interval (float64) (Required, positional) Bucket interval.</p> </li> <li> <p>WithOffset (float64) (Optional, functional option) Offset for bucket boundaries.</p> </li> <li> <p>WithMinDocCount (int) (Optional, functional option) Minimum document count.</p> </li> <li> <p>WithOrder (map[string]any) (Optional, functional option) Order for buckets.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Return buckets as a keyed object.</p> </li> <li> <p>WithExtendedBounds (map[string]any) (Optional, functional option) Extended bounds for buckets.</p> </li> <li> <p>WithHardBounds (map[string]any) (Optional, functional option) Hard bounds for buckets.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"histogram_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the histogram aggregation and its parameters, refer to the official Elasticsearch documentation on histogram aggregation.</p>"},{"location":"ids_query/","title":"IDs Query","text":"<p>Returns documents based on their IDs.</p>"},{"location":"ids_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    iq \"github.com/sdqri/effdsl/queries/idsquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        iq.IDsQuery(\"1\", \"4\", \"100\"),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"ids_query/#parameters","title":"Parameters","text":"<ul> <li>Values (...string) (Required, positional) An array of document IDs. This is a required parameter.</li> </ul>"},{"location":"ids_query/#additional-information","title":"Additional Information","text":"<p>For more details on the IDs query, see the official Elasticsearch documentation on IDs queries.</p>"},{"location":"inference_bucket_aggregation/","title":"Inference Bucket Aggregation","text":"<p>The inference bucket aggregation runs a trained model over bucketed values.</p>"},{"location":"inference_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    inferencebucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/inferencebucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        inferencebucket.InferenceBucket(\n            \"malicious_client_ip\",\n            \"malicious_clients_model\",\n            map[string]string{\n                \"response_count\": \"responses_total\",\n                \"url_dc\":         \"url_dc\",\n                \"bytes_sum\":      \"bytes_sum\",\n            },\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"inference_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>ModelID (string) (Required, positional) Model ID or alias.</p> </li> <li> <p>BucketsPath (map[string]string) (Required, positional) Map of model input fields to bucketed metrics.</p> </li> <li> <p>WithInferenceConfig (any) (Optional, functional option) Overrides model inference config.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"inference_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the inference bucket aggregation and its parameters, refer to the official Elasticsearch documentation on inference bucket aggregation.</p>"},{"location":"ip_range_aggregation/","title":"IP Range Aggregation","text":"<p>The IP range aggregation buckets documents into IP ranges.</p>"},{"location":"ip_range_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    iprange \"github.com/sdqri/effdsl/v2/aggregations/bucket/iprange\"\n)\n\nranges := []iprange.IPRangeItem{\n    {Mask: \"10.0.0.0/8\"},\n    {From: \"10.0.0.0\", To: \"10.0.0.255\"},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        iprange.IPRange(\n            \"ip_ranges\",\n            \"ip\",\n            ranges,\n            iprange.WithKeyed(true),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"ip_range_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) IP field to bucket on.</p> </li> <li> <p>Ranges ([]IPRangeItem) (Required, positional) Ranges to bucket into.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Return buckets as a keyed object.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"ip_range_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the IP range aggregation and its parameters, refer to the official Elasticsearch documentation on IP range aggregation.</p>"},{"location":"match_all_query/","title":"Match All Query","text":"<p>A match all query returns all documents in the index, assigning each a <code>_score</code> of <code>1.0</code>. This query is useful when retrieving all documents or when combined with other queries.</p>"},{"location":"match_all_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    maq \"github.com/sdqri/effdsl/queries/matchallquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        maq.MatchAllQuery(\n            maq.WithBoost(1.2),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"match_all_query/#parameters","title":"Parameters","text":"<ul> <li>WithBoost (float64) (Optional, Functional option) Floating-point number used to decrease or increase the relevance scores of the query.</li> </ul>"},{"location":"match_all_query/#match-none-query","title":"Match None Query","text":"<p>A match none query returns no documents. This query is useful when dynamically constructing queries and needing an explicit way to return no results.</p>"},{"location":"match_all_query/#example_1","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mnq \"github.com/sdqri/effdsl/queries/matchnonequery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        mnq.MatchNoneQuery(),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"match_all_query/#additional-information","title":"Additional Information","text":"<p>For more details on the match all query and its parameters, refer to the official Elasticsearch documentation on match all queries.</p>"},{"location":"match_bool_prefix/","title":"Match Bool Prefix Query","text":"<p>A match bool prefix query analyzes its input and constructs a bool query from the terms. Each term except the last is used in a term query, and the last term is used in a prefix query.</p>"},{"location":"match_bool_prefix/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mbpq \"github.com/sdqri/effdsl/queries/matchboolprefix\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        mbpq.MatchBoolPrefixQuery(\n            \"message\",\n            \"quick brown f\",\n            mbpq.WithAnalyzer(\"keyword\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"match_bool_prefix/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Query (string) (Required, positional) The query text you wish to search for in the provided field. This is a required parameter.</p> </li> <li> <p>WithAnalyzer (string) (Optional, Functional option) Analyzer used to convert the text in the query value into tokens. If no analyzer is provided, the default analyzer for the field is used.</p> </li> </ul>"},{"location":"match_bool_prefix/#additional-information","title":"Additional Information","text":"<p>For more details on the match bool prefix query and its parameters, refer to the official Elasticsearch documentation on match bool prefix queries.</p>"},{"location":"match_phrase_prefix/","title":"Match Phrase Prefix Query","text":"<p>A match phrase prefix query returns documents that match a given phrase with a prefix, considering the position of the terms. The provided text is analyzed before matching.</p>"},{"location":"match_phrase_prefix/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mppq \"github.com/sdqri/effdsl/queries/matchphraseprefixquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        mppq.MatchPhrasePrefixQuery(\n            \"field_name\",\n            \"some phrase prefix query\",\n            mppq.WithAnalyzer(\"my_analyzer\"),\n            mppq.WithSlop(2),\n            mppq.WithMaxExpansions(10),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"match_phrase_prefix/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field to search. This is a required parameter.</p> </li> <li> <p>Query (string) (Required, positional) The text to search for in the provided field. This is a required parameter.</p> </li> <li> <p>WithAnalyzer (string) (Optional, Functional option) Analyzer used to convert the text in the query value into tokens. Defaults to the index-time analyzer mapped for the field. If no analyzer is mapped, the index\u2019s default analyzer is used.</p> </li> <li> <p>WithSlop (int) (Optional, Functional option) Maximum number of positions allowed between matching tokens for phrases. Defaults to 0.</p> </li> <li> <p>WithMaxExpansions (int) (Optional, Functional option) Maximum number of terms to which the last provided term will expand. Defaults to not expanding terms.</p> </li> <li> <p>WithZeroTermsQuery (ZeroTerms) (Optional, Functional option) Indicates what to do when the analyzed text contains no terms. Valid values are:</p> <ul> <li><code>none</code> (Default): No documents are returned if the analyzer removes all tokens.</li> <li><code>all</code>: Returns all documents, similar to a match_all query.</li> </ul> </li> </ul>"},{"location":"match_phrase_prefix/#additional-information","title":"Additional Information","text":"<p>For more details on the match phrase prefix query and its parameters, refer to the official Elasticsearch documentation on match phrase prefix queries.</p>"},{"location":"match_phrase_query/","title":"Match Phrase Query","text":"<p>A match phrase query returns documents that match a given phrase, considering the position of the terms. The provided text is analyzed before matching.</p>"},{"location":"match_phrase_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mpq \"github.com/sdqri/effdsl/queries/matchphrasequery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        mpq.MatchPhraseQuery(\n            \"field_name\",\n            \"some phrase query\",\n            mpq.WithAnalyzer(\"my_analyzer\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"match_phrase_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field to search. This is a required parameter.</p> </li> <li> <p>Query (string) (Required, positional) The text to search for in the provided field. This is a required parameter.</p> </li> <li> <p>WithAnalyzer (string) (Optional, Functional option) Analyzer used to convert the text in the query value into tokens. Defaults to the index-time analyzer mapped for the field. If no analyzer is mapped, the index\u2019s default analyzer is used.</p> </li> <li> <p>WithSlop (int) (Optional, Functional option) Maximum number of positions allowed between matching tokens for phrases. Defaults to 0.</p> </li> <li> <p>WithZeroTermsquery (ZeroTerms) (Optional, Functional option) Indicates what to do when the analyzed text contains no terms. Valid values are:</p> <ul> <li><code>none</code> (Default): No documents are returned if the analyzer removes all tokens.</li> <li><code>all</code>: Returns all documents, similar to a match_all query.</li> </ul> </li> </ul>"},{"location":"match_phrase_query/#additional-information","title":"Additional Information","text":"<p>For more details on the match phrase query and its parameters, refer to the official Elasticsearch documentation on match phrase queries.</p>"},{"location":"match_query/","title":"Match Query","text":"<p>A match query returns documents that match a provided text, number, date, or boolean value. The provided text is analyzed before matching. </p>"},{"location":"match_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mq \"github.com/sdqri/effdsl/queries/matchquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        mq.MatchQuery(\n            \"field_name\",\n            \"some match query\",\n            mq.WithOperator(mq.AND),\n            mq.WithFuzzinessParameter(mq.FuzzinessAUTO),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"match_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Query (string) (Required, positional) The text, number, boolean value, or date you wish to find in the provided field. This is a required parameter.</p> </li> <li> <p>WithAnalyzer (string) (Optional, Functional option) Analyzer used to convert the text in the query value into tokens. Defaults to the index-time analyzer mapped for the field. If no analyzer is mapped, the index\u2019s default analyzer is used.</p> </li> <li> <p>WithAutoGenerateSynonymsPhrase (bool) (Optional, Functional option) If true, match phrase queries are automatically created for multi-term synonyms.</p> </li> <li> <p>WithBoost (float64) (Optional, Functional option) Floating-point number used to decrease or increase the relevance scores of the query.</p> </li> <li> <p>WithFuzzinessParameter (int) (Optional, Functional option) Maximum number of terms to which the query will expand.</p> </li> <li> <p>WithMaxExpansions (int) (Optional, Functional option) Maximum number of terms to which the query will expand. Defaults to 50.</p> </li> <li> <p>WithPrefixLength (int) (Optional, Functional option) Number of beginning characters left unchanged for fuzzy matching. Defaults to 0.</p> </li> <li> <p>WithFuzzyTranspositions (bool) (Optional, Functional option) If true, edits for fuzzy matching include transpositions of two adjacent characters.</p> </li> <li> <p>WithFuzzyRewrite (FuzzyRewrite) (Optional, Functional option) Method used to rewrite the query. See the rewrite parameter for valid values and more information.</p> </li> <li> <p>WithOperator (Operator) (Optional, Functional option) Boolean logic used to interpret text in the query value. Valid values are:</p> <ul> <li><code>OR</code> (Default): For example, a query value of \"capital of Hungary\" is interpreted as \"capital OR of OR Hungary\".</li> <li><code>AND</code>: For example, a query value of \"capital of Hungary\" is interpreted as \"capital AND of AND Hungary\".</li> </ul> </li> <li> <p>WithMinimumShouldMatch (string) (Optional, Functional option) Minimum number of clauses that must match for a document to be returned.</p> </li> </ul>"},{"location":"match_query/#additional-information","title":"Additional Information","text":"<p>For more details on the match query and its parameters, refer to the official Elasticsearch documentation on match queries.</p>"},{"location":"matrix_stats_aggregation/","title":"Matrix Stats Aggregation","text":"<p>The matrix stats aggregation computes a set of statistics over multiple numeric fields.</p>"},{"location":"matrix_stats_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    matrixstats \"github.com/sdqri/effdsl/v2/aggregations/metrics/matrixstats\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        matrixstats.MatrixStats(\n            \"statistics\",\n            []string{\"poverty\", \"income\"},\n            matrixstats.WithMode(\"avg\"),\n            matrixstats.WithMissing(map[string]any{\"income\": 50000}),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"matrix_stats_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Fields ([]string) (Optional, positional) Fields to compute statistics for.</p> </li> <li> <p>WithMissing (map[string]any) (Optional, functional option) Default values for missing fields.</p> </li> <li> <p>WithMode (string) (Optional, functional option) How to handle multi-value fields (<code>avg</code>, <code>min</code>, <code>max</code>, <code>sum</code>, <code>median</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"matrix_stats_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the matrix stats aggregation and its parameters, refer to the official Elasticsearch documentation on matrix stats aggregation.</p>"},{"location":"max_aggregation/","title":"Max Aggregation","text":"<p>The max aggregation is a single-value metrics aggregation that computes the maximum of numeric values extracted from the aggregated documents.</p>"},{"location":"max_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    max \"github.com/sdqri/effdsl/v2/aggregations/metrics/max\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        max.Max(\n            \"max_price\",\n            \"price\",\n            max.WithMissing(0),\n            max.WithFormat(\"0.00\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"max_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute the maximum from. Required when script is not set.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output value.</p> </li> <li> <p>WithValueType (string) (Optional, functional option) Hint about the value type for scripted metrics.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"max_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the max aggregation and its parameters, refer to the official Elasticsearch documentation on max aggregation.</p>"},{"location":"max_bucket_aggregation/","title":"Max Bucket Aggregation","text":"<p>The max bucket aggregation identifies the bucket with the maximum value of a metric.</p>"},{"location":"max_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    maxbucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/maxbucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        maxbucket.MaxBucket(\n            \"max_monthly_sales\",\n            \"sales_per_month&gt;sales\",\n            maxbucket.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"max_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"max_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the max bucket aggregation and its parameters, refer to the official Elasticsearch documentation on max bucket aggregation.</p>"},{"location":"median_absolute_deviation_aggregation/","title":"Median Absolute Deviation Aggregation","text":"<p>The median absolute deviation aggregation approximates the median absolute deviation of numeric values in the aggregated documents.</p>"},{"location":"median_absolute_deviation_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    medianabsolutedeviation \"github.com/sdqri/effdsl/v2/aggregations/metrics/medianabsolutedeviation\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        medianabsolutedeviation.MedianAbsoluteDeviation(\n            \"review_variability\",\n            \"rating\",\n            medianabsolutedeviation.WithCompression(100),\n            medianabsolutedeviation.WithMissing(5),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"median_absolute_deviation_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute the median absolute deviation for.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithCompression (int) (Optional, functional option) Compression factor controlling accuracy vs. memory usage.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"median_absolute_deviation_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the median absolute deviation aggregation and its parameters, refer to the official Elasticsearch documentation on median absolute deviation aggregation.</p>"},{"location":"min_aggregation/","title":"Min Aggregation","text":"<p>The min aggregation is a single-value metrics aggregation that computes the minimum of numeric values extracted from the aggregated documents.</p>"},{"location":"min_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    min \"github.com/sdqri/effdsl/v2/aggregations/metrics/min\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        min.Min(\n            \"min_price\",\n            \"price\",\n            min.WithMissing(0),\n            min.WithFormat(\"0.00\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"min_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute the minimum from. Required when script is not set.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output value.</p> </li> <li> <p>WithValueType (string) (Optional, functional option) Hint about the value type for scripted metrics.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"min_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the min aggregation and its parameters, refer to the official Elasticsearch documentation on min aggregation.</p>"},{"location":"min_bucket_aggregation/","title":"Min Bucket Aggregation","text":"<p>The min bucket aggregation identifies the bucket with the minimum value of a metric.</p>"},{"location":"min_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    minbucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/minbucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        minbucket.MinBucket(\n            \"min_monthly_sales\",\n            \"sales_per_month&gt;sales\",\n            minbucket.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"min_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"min_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the min bucket aggregation and its parameters, refer to the official Elasticsearch documentation on min bucket aggregation.</p>"},{"location":"missing_aggregation/","title":"Missing Aggregation","text":"<p>The missing aggregation creates a bucket of documents that are missing a field.</p>"},{"location":"missing_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    missing \"github.com/sdqri/effdsl/v2/aggregations/bucket/missing\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        missing.Missing(\n            \"missing_price\",\n            \"price\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"missing_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to check for missing values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"missing_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the missing aggregation and its parameters, refer to the official Elasticsearch documentation on missing aggregation.</p>"},{"location":"moving_fn_aggregation/","title":"Moving Function Aggregation","text":"<p>The moving function aggregation applies a script over a sliding window of bucket values.</p>"},{"location":"moving_fn_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    movingfn \"github.com/sdqri/effdsl/v2/aggregations/pipeline/movingfn\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        movingfn.MovingFn(\n            \"the_movfn\",\n            \"the_sum\",\n            10,\n            \"MovingFunctions.unweightedAvg(values)\",\n            movingfn.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"moving_fn_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>Window (int) (Required, positional) Window size.</p> </li> <li> <p>Script (string) (Required, positional) Script to run over the window values.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithShift (int) (Optional, functional option) Shift of window position.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"moving_fn_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the moving function aggregation and its parameters, refer to the official Elasticsearch documentation on moving function aggregation.</p>"},{"location":"moving_percentiles_aggregation/","title":"Moving Percentiles Aggregation","text":"<p>The moving percentiles aggregation computes percentiles across a sliding window of percentile sketches.</p>"},{"location":"moving_percentiles_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    movingpercentiles \"github.com/sdqri/effdsl/v2/aggregations/pipeline/movingpercentiles\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        movingpercentiles.MovingPercentiles(\n            \"the_movperc\",\n            \"the_percentile\",\n            10,\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"moving_percentiles_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the percentile metric.</p> </li> <li> <p>Window (int) (Required, positional) Window size.</p> </li> <li> <p>WithShift (int) (Optional, functional option) Shift of window position.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"moving_percentiles_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the moving percentiles aggregation and its parameters, refer to the official Elasticsearch documentation on moving percentiles aggregation.</p>"},{"location":"multi_match_query/","title":"Multi Match Query","text":"<p>A multi match query searches multiple fields for the provided query text. It is useful when the same text should be matched against a set of fields with different weights or options.</p>"},{"location":"multi_match_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mmq \"github.com/sdqri/effdsl/queries/multimatchquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        mmq.MultiMatchQuery(\n            \"quick brown fox\",\n            mmq.WithFields(\"title\", \"message\"),\n            mmq.WithType(mmq.BestFields),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"multi_match_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Query (string) (Required, positional) The text to search for. This is a required parameter.</p> </li> <li> <p>WithFields (...string) (Optional, Functional option) Fields to search. Each field can include a boost using the <code>field^boost</code> syntax.</p> </li> <li> <p>WithType (MultiMatchType) (Optional, Functional option) Type of multi match query. Valid values are:</p> <ul> <li><code>best_fields</code></li> <li><code>most_fields</code></li> <li><code>cross_fields</code></li> <li><code>phrase</code></li> <li><code>phrase_prefix</code></li> <li><code>bool_prefix</code></li> </ul> </li> <li> <p>WithOperator (Operator) (Optional, Functional option) Boolean logic used to interpret text in the query. Valid values are:</p> <ul> <li><code>or</code> (Default)</li> <li><code>and</code></li> </ul> </li> <li> <p>WithAnalyzer (string) (Optional, Functional option) Analyzer used to convert the text in the query value into tokens.</p> </li> <li> <p>WithSlop (int) (Optional, Functional option) Maximum number of positions allowed between matching tokens for phrases.</p> </li> <li> <p>WithFuzziness (string) (Optional, Functional option) Fuzziness used for fuzzy matching.</p> </li> <li> <p>WithPrefixLength (int) (Optional, Functional option) Number of beginning characters left unchanged for fuzzy matching.</p> </li> <li> <p>WithMaxExpansions (int) (Optional, Functional option) Maximum number of terms the query will expand to for fuzzy matching.</p> </li> <li> <p>WithMinimumShouldMatch (string) (Optional, Functional option) Minimum number of clauses that must match for a document to be returned.</p> </li> <li> <p>WithTieBreaker (float64) (Optional, Functional option) Tie breaker used when <code>best_fields</code> type is specified.</p> </li> <li> <p>WithLenient (bool) (Optional, Functional option) If true, format-based errors, such as providing text for a numeric field, are ignored.</p> </li> <li> <p>WithZeroTermsQuery (ZeroTerms) (Optional, Functional option) Indicates what to do when the query string contains no terms. Valid values are:</p> <ul> <li><code>none</code> (Default)</li> <li><code>all</code></li> </ul> </li> <li> <p>WithAutoGenerateSynonymsPhraseQuery (bool) (Optional, Functional option) If true, match phrase queries are automatically created for multi-term synonyms.</p> </li> </ul>"},{"location":"multi_match_query/#additional-information","title":"Additional Information","text":"<p>For more details on the multi match query and its parameters, refer to the official Elasticsearch documentation on multi match queries.</p>"},{"location":"multi_terms_aggregation/","title":"Multi Terms Aggregation","text":"<p>The multi terms aggregation buckets documents by multiple terms.</p>"},{"location":"multi_terms_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    multiterms \"github.com/sdqri/effdsl/v2/aggregations/bucket/multiterms\"\n)\n\nterms := []any{\n    map[string]any{\"field\": \"category\"},\n    map[string]any{\"field\": \"brand\"},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        multiterms.MultiTerms(\n            \"category_brand\",\n            terms,\n            multiterms.WithSize(10),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"multi_terms_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Terms (any) (Required, positional) List of term definitions.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Number of buckets to return.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for bucket collection.</p> </li> <li> <p>WithOrder (map[string]any) (Optional, functional option) Bucket ordering.</p> </li> <li> <p>WithMinDocCount (int) (Optional, functional option) Minimum document count.</p> </li> <li> <p>WithShardMinDocCount (int) (Optional, functional option) Shard-level minimum document count.</p> </li> <li> <p>WithCollectMode (string) (Optional, functional option) Collect mode.</p> </li> <li> <p>WithShowTermDocCountError (bool) (Optional, functional option) Include doc count error.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"multi_terms_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the multi terms aggregation and its parameters, refer to the official Elasticsearch documentation on multi terms aggregation.</p>"},{"location":"nested_aggregation/","title":"Nested Aggregation","text":"<p>The nested aggregation aggregates nested documents.</p>"},{"location":"nested_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    nested \"github.com/sdqri/effdsl/v2/aggregations/bucket/nested\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        nested.Nested(\n            \"by_comment\",\n            \"comments\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"nested_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Path (string) (Required, positional) Nested path.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"nested_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the nested aggregation and its parameters, refer to the official Elasticsearch documentation on nested aggregation.</p>"},{"location":"nested_query/","title":"Nested Query","text":"<p>A nested query searches nested field objects as if they were separate documents. It returns the root document when a nested document matches the provided query.</p>"},{"location":"nested_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    bq \"github.com/sdqri/effdsl/queries/boolquery\"\n    mq \"github.com/sdqri/effdsl/queries/matchquery\"\n    nq \"github.com/sdqri/effdsl/queries/nestedquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        nq.WithNested(\n            \"path\",\n            bq.BoolQuery(\n                bq.Should(\n                    mq.MatchQuery(\"field1\", \"val1\"),\n                ),\n            ),\n            nq.WithScoreMode(\"avg\"),\n            nq.WithIgnoreUnmapped(true),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"nested_query/#parameters","title":"Parameters","text":"<ul> <li>Path (string) (Required, positional) Path to the nested object you wish to search.</li> <li>Query (effdsl.Query) (Required, positional) Query to run on the nested objects.</li> <li>WithScoreMode(string) (Optional, Functional option) Indicates how scores for matching child objects affect the parent document's score.</li> <li>WithIgnoreUnmapped(bool) (Optional, Functional option) If true, ignore unmapped paths and return no documents instead of an error.</li> </ul>"},{"location":"nested_query/#additional-information","title":"Additional Information","text":"<p>For more details on the nested query and its parameters, refer to the official Elasticsearch documentation on nested queries.</p>"},{"location":"normalize_aggregation/","title":"Normalize Aggregation","text":"<p>The normalize aggregation rescales bucket values using a specified method.</p>"},{"location":"normalize_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    normalize \"github.com/sdqri/effdsl/v2/aggregations/pipeline/normalize\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        normalize.Normalize(\n            \"percent_of_total_sales\",\n            \"sales\",\n            \"percent_of_sum\",\n            normalize.WithFormat(\"00.00%\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"normalize_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>Method (string) (Required, positional) Normalize method (<code>percent_of_sum</code>, <code>rescale_0_1</code>, <code>rescale_0_100</code>, <code>mean</code>, <code>z-score</code>, <code>softmax</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"normalize_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the normalize aggregation and its parameters, refer to the official Elasticsearch documentation on normalize aggregation.</p>"},{"location":"parent_aggregation/","title":"Parent Aggregation","text":"<p>The parent aggregation selects parent documents from child documents.</p>"},{"location":"parent_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    parent \"github.com/sdqri/effdsl/v2/aggregations/bucket/parent\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        parent.Parent(\n            \"to_parent\",\n            \"parent\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"parent_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Parent Type (string) (Required, positional) Parent type.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"parent_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the parent aggregation and its parameters, refer to the official Elasticsearch documentation on parent aggregation.</p>"},{"location":"percentile_ranks_aggregation/","title":"Percentile Ranks Aggregation","text":"<p>The percentile ranks aggregation is a multi-value metrics aggregation that calculates one or more percentile ranks over numeric values extracted from the aggregated documents.</p>"},{"location":"percentile_ranks_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    percentileranks \"github.com/sdqri/effdsl/v2/aggregations/metrics/percentileranks\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        percentileranks.PercentileRanks(\n            \"load_time_ranks\",\n            \"load_time\",\n            []float64{500, 600},\n            percentileranks.WithKeyed(false),\n            percentileranks.WithHDR(3),\n            percentileranks.WithMissing(10),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"percentile_ranks_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute percentile ranks for. Required when script is not set.</p> </li> <li> <p>Values ([]float64) (Optional, positional) Values to compute percentile ranks for.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for output values.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Whether to return a keyed response.</p> </li> <li> <p>WithHDR (int) (Optional, functional option) Use HDR histogram with the specified significant digits.</p> </li> <li> <p>WithTDigest (map[string]any) (Optional, functional option) TDigest configuration options.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"percentile_ranks_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the percentile ranks aggregation and its parameters, refer to the official Elasticsearch documentation on percentile ranks aggregation.</p>"},{"location":"percentiles_aggregation/","title":"Percentiles Aggregation","text":"<p>The percentiles aggregation is a multi-value metrics aggregation that calculates one or more percentiles over numeric values extracted from the aggregated documents.</p>"},{"location":"percentiles_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    percentiles \"github.com/sdqri/effdsl/v2/aggregations/metrics/percentiles\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        percentiles.Percentiles(\n            \"load_time_outlier\",\n            \"load_time\",\n            []float64{95, 99, 99.9},\n            percentiles.WithKeyed(false),\n            percentiles.WithHDR(3),\n            percentiles.WithMissing(10),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"percentiles_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute percentiles for. Required when script is not set.</p> </li> <li> <p>Percents ([]float64) (Optional, positional) Percentiles to calculate.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for output values.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Whether to return a keyed response.</p> </li> <li> <p>WithHDR (int) (Optional, functional option) Use HDR histogram with the specified significant digits.</p> </li> <li> <p>WithTDigest (map[string]any) (Optional, functional option) TDigest configuration options.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"percentiles_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the percentiles aggregation and its parameters, refer to the official Elasticsearch documentation on percentiles aggregation.</p>"},{"location":"percentiles_bucket_aggregation/","title":"Percentiles Bucket Aggregation","text":"<p>The percentiles bucket aggregation computes percentiles across buckets of a metric.</p>"},{"location":"percentiles_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    percentilesbucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/percentilesbucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        percentilesbucket.PercentilesBucket(\n            \"percentiles_monthly_sales\",\n            \"sales_per_month&gt;sales\",\n            percentilesbucket.WithPercents([]float64{25, 50, 75}),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"percentiles_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithPercents ([]float64) (Optional, functional option) List of percentiles to calculate.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Return results as keyed object instead of array.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"percentiles_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the percentiles bucket aggregation and its parameters, refer to the official Elasticsearch documentation on percentiles bucket aggregation.</p>"},{"location":"phrase_suggester/","title":"Phrase Suggester","text":"<p>The phrase suggester corrects entire phrases based on n-gram matching. It is useful for providing \"did you mean\" functionality.</p>"},{"location":"phrase_suggester/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    mq \"github.com/sdqri/effdsl/queries/matchquery\"\n    ps \"github.com/sdqri/effdsl/suggesters/phrasesuggester\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithSuggest(\n        ps.PhraseSuggester(\n            \"simple-phrase\",\n            \"noble prize\",\n            \"title.trigram\",\n            ps.WithLaplaceSmoothing(0.7),\n            ps.WithDirectGenerator(\"title.trigram\", ps.WithSuggestMode(ps.Always)),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"phrase_suggester/#parameters","title":"Parameters","text":"<ul> <li>SuggestName (string) (Required, positional) Name used to identify the suggestion in the response.</li> <li>Text (string) (Required, positional) Text to generate phrase suggestions for.</li> <li>Field (string) (Required, positional) Field that contains the n\u2011grams used for suggestions.</li> <li>WithGramSize(uint64) (Optional, Functional option) Maximum size of the n\u2011grams in the field.</li> <li>WithRealWordErrorLikelihood(float64) (Optional, Functional option) Likelihood of a term being misspelled even if it exists in the dictionary.</li> <li>WithConfidence(float64) (Optional, Functional option) Threshold factor applied to input phrase scores.</li> <li>WithMaxErrors(float64) (Optional, Functional option) Maximum percentage or number of terms considered misspellings.</li> <li>WithSeparator(string) (Optional, Functional option) Separator used to join tokens in the bigram field.</li> <li>WithSize(uint64) (Optional, Functional option) Number of candidate phrases to return.</li> <li>WithAnalyzer(string) (Optional, Functional option) Analyzer used to analyze the suggest text.</li> <li>WithShardSize(uint64) (Optional, Functional option) Maximum number of suggestions retrieved from each shard.</li> <li>WithHighlight(preTag, postTag string) (Optional, Functional option) Adds highlighting to changed tokens.</li> <li>WithCollate(queryResult, opts ...WithCollateOption) (Optional, Functional option) Checks suggestions against a query. <code>WithParams</code> and <code>WithPrune</code> are available options.</li> <li>WithStupidBackoffSmoothing(discount float64), WithLaplaceSmoothing(alpha float64), WithLinearInterpolationSmoothing(tri, bi, uni float64) (Optional, Functional option) Smoothing models used to balance frequencies.</li> <li>WithDirectGenerator(field string, opts ...WithDirectGeneratorOption) (Optional, Functional option) Adds a direct generator. Options include <code>WithSuggestMode</code>, <code>WithDirectGeneratorSize</code>, <code>WithMaxEdits</code>, <code>WithPrefixLength</code>, <code>WithMinWordLength</code>, <code>WithMaxInspections</code>, <code>WithMinDocFreq</code>, <code>WithMaxTermFreq</code>, <code>WithPreFilter</code> and <code>WithPostFilter</code>.</li> </ul>"},{"location":"phrase_suggester/#additional-information","title":"Additional Information","text":"<p>For more details on the phrase suggester and its parameters, refer to the official Elasticsearch documentation on phrase suggesters.</p>"},{"location":"prefix_query/","title":"Prefix Query","text":"<p>A prefix query returns documents that contain terms starting with the specified prefix in a given field.</p>"},{"location":"prefix_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    pq \"github.com/sdqri/effdsl/queries/prefixquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        pq.PrefixQuery(\n            \"name\",\n            \"al\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"prefix_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Value (string) (Required, positional) The prefix you wish to match against terms in the provided field. This is a required parameter.</p> </li> <li> <p>WithRewrite (Rewrite) (Optional, Functional option) The method used to rewrite the query. Valid values are:</p> <ul> <li><code>constant_score</code>: Query is rewritten to a constant score query.</li> <li><code>scoring_boolean</code>: Query is rewritten to a scoring boolean query.</li> <li><code>constant_score_boolean</code>: Query is rewritten to a constant score boolean query.</li> <li><code>top_terms_N</code>: Query is rewritten to match the top N scoring terms.</li> <li><code>top_terms_boost_N</code>: Query is rewritten to match the top N scoring terms with boosting.</li> <li><code>top_terms_blended_freqs_N</code>: Query is rewritten to match the top N scoring terms with blended frequencies.</li> </ul> </li> <li> <p>WithCaseInsensitive (bool) (Optional, Functional option) Whether the query is case insensitive. Defaults to false.</p> </li> </ul>"},{"location":"prefix_query/#additional-information","title":"Additional Information","text":"<p>For more details on the prefix query and its parameters, refer to the official Elasticsearch documentation on prefix queries.</p>"},{"location":"query_string/","title":"Query String Query","text":"<p>A query string query parses and executes a search query based on a query string syntax. It allows for flexible and complex query expressions.</p>"},{"location":"query_string/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    qs \"github.com/sdqri/effdsl/queries/querystring\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        qs.QueryString(\n            \"alice\",\n            qs.WithFields(\"first_name\", \"last_name\")\n            qs.WithBoost(1.5),\n            qs.WithFuzziness(\"AUTO\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"query_string/#parameters","title":"Parameters","text":"<ul> <li> <p>Query (string) (Required, positional) The query string to parse and use for search. This is a required parameter.</p> </li> <li> <p>WithDefaultField (string) (Optional, Functional option) Default field to search if no field is provided in the query string.</p> </li> <li> <p>WithAllowLeadingWildcard () (Optional, Functional option) If true, wildcard characters <code>*</code> and <code>?</code> are allowed as the first character in the query string. Defaults to true.</p> </li> <li> <p>WithAnalyzeWildcard () (Optional, Functional option) If true, the query attempts to analyze wildcard terms in the query string. Defaults to false.</p> </li> <li> <p>WithAnalyzer (string) (Optional, Functional option) Analyzer used to convert the text in the query string into tokens.</p> </li> <li> <p>WithAutoGenerateSynonymsPhrase (bool) (Optional, Functional option) If true, match phrase queries are automatically created for multi-term synonyms. Defaults to true.</p> </li> <li> <p>WithBoost (float64) (Optional, Functional option) Floating point number used to adjust the relevance scores of the query.</p> </li> <li> <p>WithDefaultOperator (Operator) (Optional, Functional option) Default boolean logic used to interpret text in the query string. Valid values are:</p> <ul> <li><code>OR</code>: Logical OR.</li> <li><code>AND</code>: Logical AND.</li> </ul> </li> <li> <p>WithEnablePositionIncrements (bool) (Optional, Functional option) If true, enable position increments in queries constructed from the query string search.</p> </li> <li> <p>WithFields (...string) (Optional, Functional option) Array of fields to search. Supports wildcards <code>*</code>.</p> </li> <li> <p>WithFuzziness (string) (Optional, Functional option) Maximum edit distance allowed for fuzzy matching.</p> </li> <li> <p>WithFuzzyMaxExpansions (int) (Optional, Functional option) Maximum number of terms for fuzzy matching expansion.</p> </li> <li> <p>WithFuzzyPrefixLength (int) (Optional, Functional option) Number of beginning characters left unchanged for fuzzy matching.</p> </li> <li> <p>WithFuzzyTranspositions (bool) (Optional, Functional option) If true, edits for fuzzy matching include transpositions of adjacent characters.</p> </li> <li> <p>WithLenient (bool) (Optional, Functional option) If true, format-based errors are ignored.</p> </li> <li> <p>WithMaxDeterminizedStates (int) (Optional, Functional option) Maximum number of automaton states required for the query.</p> </li> <li> <p>WithMinimumShouldMatch (string) (Optional, Functional option) Minimum number of clauses that must match for a document to be returned.</p> </li> <li> <p>WithQuoteAnalyzer (string) (Optional, Functional option) Analyzer used to convert quoted text in the query string into tokens.</p> </li> <li> <p>WithPhraseSlop (int) (Optional, Functional option) Maximum number of positions allowed between matching tokens for phrases.</p> </li> <li> <p>WithQuoteFieldSuffix (string) (Optional, Functional option) Suffix appended to quoted text in the query string.</p> </li> <li> <p>WithRewrite (Rewrite) (Optional, Functional option) Method used to rewrite the query. Valid values are:</p> <ul> <li><code>constant_score</code></li> <li><code>scoring_boolean</code></li> <li><code>constant_score_boolean</code></li> <li><code>top_terms_N</code></li> <li><code>top_terms_boost_N</code></li> <li><code>top_terms_blended_freqs_N</code></li> </ul> </li> <li> <p>WithTimeZone (string) (Optional, Functional option) UTC offset or IANA time zone used to convert date values in the query string to UTC.</p> </li> </ul>"},{"location":"query_string/#additional-information","title":"Additional Information","text":"<p>For more details on the query string query and its parameters, refer to the official Elasticsearch documentation on query string queries.</p>"},{"location":"random_sampler_aggregation/","title":"Random Sampler Aggregation","text":"<p>The random sampler aggregation randomly samples documents in a bucket.</p>"},{"location":"random_sampler_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    randomsampler \"github.com/sdqri/effdsl/v2/aggregations/bucket/randomsampler\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        randomsampler.RandomSampler(\n            \"sample\",\n            0.1,\n            randomsampler.WithSeed(42),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"random_sampler_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Probability (float64) (Required, positional) Sampling probability.</p> </li> <li> <p>WithSeed (int) (Optional, functional option) Random seed.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"random_sampler_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the random sampler aggregation and its parameters, refer to the official Elasticsearch documentation on random sampler aggregation.</p>"},{"location":"range_aggregation/","title":"Range Aggregation","text":"<p>The range aggregation buckets documents into numeric ranges.</p>"},{"location":"range_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    rangeagg \"github.com/sdqri/effdsl/v2/aggregations/bucket/rangeagg\"\n)\n\nranges := []rangeagg.RangeItem{\n    {To: 50},\n    {From: 50, To: 100},\n    {From: 100},\n}\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        rangeagg.Range(\n            \"price_ranges\",\n            \"price\",\n            ranges,\n            rangeagg.WithKeyed(true),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"range_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to bucket on.</p> </li> <li> <p>Ranges ([]RangeItem) (Required, positional) Ranges to bucket into.</p> </li> <li> <p>WithKeyed (bool) (Optional, functional option) Return buckets as a keyed object.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"range_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the range aggregation and its parameters, refer to the official Elasticsearch documentation on range aggregation.</p>"},{"location":"range_query/","title":"Range Query","text":"<p>A range query returns documents that contain terms within a specified range. It supports querying for values that are greater than, less than, or between certain values.</p>"},{"location":"range_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    rq \"github.com/sdqri/effdsl/queries/rangequery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        rq.RangeQuery(\n            \"age\",\n            rq.WithGT(10),\n            rq.WithLTE(20),\n            rq.WithBoost(2.0),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"range_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>WithGT (any) (Optional, Functional option) Greater than. If specified, the range query will include terms greater than this value.</p> </li> <li> <p>WithGTE (any) (Optional, Functional option) Greater than or equal to. If specified, the range query will include terms greater than or equal to this value.</p> </li> <li> <p>WithLT (any) (Optional, Functional option) Less than. If specified, the range query will include terms less than this value.</p> </li> <li> <p>WithLTE (any) (Optional, Functional option) Less than or equal to. If specified, the range query will include terms less than or equal to this value.</p> </li> <li> <p>WithFormat (string) (Optional, Functional option) Date format used to convert date values in the query.</p> </li> <li> <p>WithRelation (Relation) (Optional, Functional option) Indicates how the range query matches values for range fields. Valid values are:</p> <ul> <li><code>INTERSECTS</code></li> <li><code>CONTAINS</code></li> <li><code>WITHIN</code></li> </ul> </li> <li> <p>WithTimeZone (string) (Optional, Functional option) Coordinated Universal Time (UTC) offset or IANA time zone used to convert date values in the query to UTC.</p> </li> <li> <p>WithBoost (float64) (Optional, Functional option) Floating point number used to decrease or increase the relevance scores of the query. Defaults to 1.0.</p> </li> </ul>"},{"location":"range_query/#additional-information","title":"Additional Information","text":"<p>For more details on the range query and its parameters, refer to the official Elasticsearch documentation on range queries.</p>"},{"location":"rare_terms_aggregation/","title":"Rare Terms Aggregation","text":"<p>The rare terms aggregation returns buckets for terms that are rare in the data set.</p>"},{"location":"rare_terms_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    rareterms \"github.com/sdqri/effdsl/v2/aggregations/bucket/rareterms\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        rareterms.RareTerms(\n            \"rare_categories\",\n            \"category\",\n            rareterms.WithMaxDocCount(2),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"rare_terms_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to bucket on.</p> </li> <li> <p>WithMaxDocCount (int) (Optional, functional option) Maximum document count.</p> </li> <li> <p>WithInclude (any) (Optional, functional option) Include pattern or values.</p> </li> <li> <p>WithExclude (any) (Optional, functional option) Exclude pattern or values.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"rare_terms_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the rare terms aggregation and its parameters, refer to the official Elasticsearch documentation on rare terms aggregation.</p>"},{"location":"rate_aggregation/","title":"Rate Aggregation","text":"<p>The rate aggregation is a metrics aggregation that calculates a rate of documents or a field in each date-based bucket.</p>"},{"location":"rate_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    rate \"github.com/sdqri/effdsl/v2/aggregations/metrics/rate\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        rate.Rate(\n            \"avg_price\",\n            rate.WithField(\"price\"),\n            rate.WithUnit(\"day\"),\n            rate.WithMode(\"sum\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"rate_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithField (string) (Optional, functional option) Field to compute the rate for.</p> </li> <li> <p>WithUnit (string) (Optional, functional option) Rate unit (for example, <code>day</code>, <code>month</code>, <code>year</code>).</p> </li> <li> <p>WithMode (string) (Optional, functional option) Mode for rate calculation (<code>sum</code> or <code>value_count</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"rate_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the rate aggregation and its parameters, refer to the official Elasticsearch documentation on rate aggregation.</p>"},{"location":"regexp_query/","title":"Regexp Query","text":"<p>A regexp query returns documents that contain terms matching a specified regular expression. The regular expression can include additional options for controlling the match behavior.</p>"},{"location":"regexp_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    rq \"github.com/sdqri/effdsl/queries/regexpquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        rq.RegexpQuery(\n            \"user.id\",\n            \"k.*y\",\n            rq.WithFlags(\"ALL\"),\n            rq.WithCaseInsensitive(),\n            rq.WithMaxDeterminizedStates(10000),\n            rq.WithRQRewrite(rq.ConstantScore),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"regexp_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Value (string) (Required, positional) The regular expression pattern to match against the field. This is a required parameter.</p> </li> <li> <p>WithFlags (string) (Optional, Functional option) Additional matching options for the regular expression.</p> </li> <li> <p>WithCaseInsensitive (bool) (Optional, Functional option) If true, the regular expression is case-insensitive.</p> </li> <li> <p>WithMaxDeterminizedStates (int) (Optional, Functional option) The maximum number of automaton states required for the query. Lower values will reduce memory usage but increase query time.</p> </li> <li> <p>WithRewrite (Rewrite) (Optional, Functional option) The method used to rewrite the query. Valid values are:</p> <ul> <li><code>constant_score</code>: Query is rewritten to a constant score query.</li> <li><code>scoring_boolean</code>: Query is rewritten to a scoring boolean query.</li> <li><code>constant_score_boolean</code>: Query is rewritten to a constant score boolean query.</li> <li><code>top_terms_N</code>: Query is rewritten to match the top N scoring terms.</li> <li><code>top_terms_boost_N</code>: Query is rewritten to match the top N scoring terms with boosting.</li> <li><code>top_terms_blended_freqs_N</code>: Query is rewritten to match the top N scoring terms with blended frequencies.</li> </ul> </li> </ul>"},{"location":"regexp_query/#additional-information","title":"Additional Information","text":"<p>For more details on the regexp query and its parameters, refer to the official Elasticsearch documentation on regexp queries.</p>"},{"location":"release_notes/","title":"Release Notes","text":""},{"location":"release_notes/#v270-latest","title":"v2.7.0 Latest","text":""},{"location":"release_notes/#whats-new","title":"What's New","text":"<ul> <li>Add comprehensive aggregation support across metrics, bucket, and pipeline aggregations.</li> <li>Introduce aggregation APIs and helpers for composing aggregations in queries.</li> </ul>"},{"location":"release_notes/#highlights","title":"Highlights","text":"<ul> <li>Metrics aggregations: avg, sum, min/max, stats/extended stats, percentiles/percentile ranks, rate, scripted metric, t-test, string stats, top hits, top metrics, value count, weighted avg, boxplot, median absolute deviation, cardinality, matrix stats, cartesian/geo variants.</li> <li>Bucket aggregations: terms, filters/filter, date histogram/date range/auto date histogram, range/histogram, geo grids, missing, nested/reverse nested, composite, rare/multi terms, sampler/diversified/random sampler, significant terms/text, parent/children/global, adjacency matrix, variable width histogram.</li> <li>Pipeline aggregations: avg/sum/min/max/stats/extended stats/percentiles bucket, bucket script/selector/sort, cumulative sum/cardinality, derivative, serial diff, normalize, moving fn/percentiles, bucket correlation, bucket count K-S test, change point, inference bucket.</li> </ul>"},{"location":"release_notes/#whats-changed","title":"What's Changed","text":"<ul> <li>Expand aggregation example test coverage and add doc-style option cases.</li> <li>Update aggregation docs navigation and fix geo distance doc entry.</li> </ul>"},{"location":"release_notes/#v212","title":"v2.1.2","text":""},{"location":"release_notes/#whats-new_1","title":"What's New","text":"<ul> <li>\u2728 Add support for boosting query, constant score query, disjunction max query in compound queries.</li> <li>\u2728 Add support for match query, match_bool_prefix query, match_phrase query, match_phrase_prefix query, simple_query_string query in full text queries.</li> <li>\u2728 Add support for ids query, prefix query, wildcard query in term-level queries.</li> <li>\ud83d\udcdd Add documentation for all supported queries.</li> </ul>"},{"location":"release_notes/#whats-changed_1","title":"What's Changed","text":"<ul> <li>\ud83d\udd04 Separate queries into packages to remove prefixed parameters.</li> <li>\u2705 Complete functional options in queries.</li> </ul>"},{"location":"release_notes/#v120","title":"v1.2.0","text":"<ul> <li>\ud83d\udca1 Extend <code>MatchQuery</code> parameters &amp; add <code>WildcardQuery</code> and <code>Suggesters</code>. PR #2 by @moguchev.</li> </ul>"},{"location":"reverse_nested_aggregation/","title":"Reverse Nested Aggregation","text":"<p>The reverse nested aggregation moves from nested documents back to the root document.</p>"},{"location":"reverse_nested_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    reversenested \"github.com/sdqri/effdsl/v2/aggregations/bucket/reversenested\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        reversenested.ReverseNested(\n            \"back_to_root\",\n            reversenested.WithPath(\"comments\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"reverse_nested_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithPath (string) (Optional, functional option) Path to reverse to.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"reverse_nested_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the reverse nested aggregation and its parameters, refer to the official Elasticsearch documentation on reverse nested aggregation.</p>"},{"location":"sampler_aggregation/","title":"Sampler Aggregation","text":"<p>The sampler aggregation limits the number of documents in a bucket for sub-aggregations.</p>"},{"location":"sampler_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    sampler \"github.com/sdqri/effdsl/v2/aggregations/bucket/sampler\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        sampler.Sampler(\n            \"sample\",\n            sampler.WithShardSize(200),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"sampler_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for sampling.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"sampler_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the sampler aggregation and its parameters, refer to the official Elasticsearch documentation on sampler aggregation.</p>"},{"location":"scripted_metric_aggregation/","title":"Scripted Metric Aggregation","text":"<p>The scripted metric aggregation executes scripts to produce a metric output.</p>"},{"location":"scripted_metric_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    scriptedmetric \"github.com/sdqri/effdsl/v2/aggregations/metrics/scriptedmetric\"\n    \"github.com/sdqri/effdsl/v2/aggregations\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        scriptedmetric.ScriptedMetric(\n            \"profit\",\n            scriptedmetric.WithInitScript(aggregations.InlineScript(\"state.transactions = []\")),\n            scriptedmetric.WithMapScript(aggregations.InlineScript(\"state.transactions.add(doc.type.value == 'sale' ? doc.amount.value : -1 * doc.amount.value)\")),\n            scriptedmetric.WithCombineScript(aggregations.InlineScript(\"double profit = 0; for (t in state.transactions) { profit += t } return profit\")),\n            scriptedmetric.WithReduceScript(aggregations.InlineScript(\"double profit = 0; for (a in states) { profit += a } return profit\")),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"scripted_metric_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithInitScript (Script) (Optional, functional option) Script executed before collection.</p> </li> <li> <p>WithMapScript (Script) (Optional, functional option) Script executed per document.</p> </li> <li> <p>WithCombineScript (Script) (Optional, functional option) Script executed per shard.</p> </li> <li> <p>WithReduceScript (Script) (Optional, functional option) Script executed on the coordinating node.</p> </li> <li> <p>WithParams (map[string]any) (Optional, functional option) Parameters passed into scripts.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"scripted_metric_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the scripted metric aggregation and its parameters, refer to the official Elasticsearch documentation on scripted metric aggregation.</p>"},{"location":"serial_diff_aggregation/","title":"Serial Differencing Aggregation","text":"<p>The serial differencing aggregation computes differences between values separated by a lag.</p>"},{"location":"serial_diff_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    serialdiff \"github.com/sdqri/effdsl/v2/aggregations/pipeline/serialdiff\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        serialdiff.SerialDiff(\n            \"thirtieth_difference\",\n            \"the_sum\",\n            serialdiff.WithLag(30),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"serial_diff_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithLag (int) (Optional, functional option) Lag to use for differencing.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>insert_zeros</code>, <code>skip</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"serial_diff_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the serial differencing aggregation and its parameters, refer to the official Elasticsearch documentation on serial differencing aggregation.</p>"},{"location":"significant_terms_aggregation/","title":"Significant Terms Aggregation","text":"<p>The significant terms aggregation returns terms that are significant in the result set.</p>"},{"location":"significant_terms_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    significantterms \"github.com/sdqri/effdsl/v2/aggregations/bucket/significantterms\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        significantterms.SignificantTerms(\n            \"significant_categories\",\n            \"category\",\n            significantterms.WithHeuristic(\"chi_square\", map[string]any{\"include_negatives\": false}),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"significant_terms_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to analyze.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Number of buckets to return.</p> </li> <li> <p>WithMinDocCount (int) (Optional, functional option) Minimum document count.</p> </li> <li> <p>WithShardMinDocCount (int) (Optional, functional option) Shard-level minimum document count.</p> </li> <li> <p>WithInclude (any) (Optional, functional option) Include pattern or values.</p> </li> <li> <p>WithExclude (any) (Optional, functional option) Exclude pattern or values.</p> </li> <li> <p>WithExecutionHint (string) (Optional, functional option) Execution hint.</p> </li> <li> <p>WithBackgroundFilter (any) (Optional, functional option) Background filter.</p> </li> <li> <p>WithHeuristic (string, map[string]any) (Optional, functional option) Significance heuristic.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"significant_terms_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the significant terms aggregation and its parameters, refer to the official Elasticsearch documentation on significant terms aggregation.</p>"},{"location":"significant_text_aggregation/","title":"Significant Text Aggregation","text":"<p>The significant text aggregation returns significant terms from text fields.</p>"},{"location":"significant_text_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    significanttext \"github.com/sdqri/effdsl/v2/aggregations/bucket/significanttext\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        significanttext.SignificantText(\n            \"significant_description\",\n            \"description\",\n            significanttext.WithFilterDuplicateText(true),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"significant_text_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to analyze.</p> </li> <li> <p>WithFilterDuplicateText (bool) (Optional, functional option) Filter duplicate text.</p> </li> <li> <p>WithMinDocCount (int) (Optional, functional option) Minimum document count.</p> </li> <li> <p>WithShardMinDocCount (int) (Optional, functional option) Shard-level minimum document count.</p> </li> <li> <p>WithSourceFields ([]string) (Optional, functional option) Source fields to analyze.</p> </li> <li> <p>WithBackgroundFilter (any) (Optional, functional option) Background filter.</p> </li> <li> <p>WithInclude (any) (Optional, functional option) Include pattern or values.</p> </li> <li> <p>WithExclude (any) (Optional, functional option) Exclude pattern or values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"significant_text_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the significant text aggregation and its parameters, refer to the official Elasticsearch documentation on significant text aggregation.</p>"},{"location":"simple_query_string/","title":"Simple Query String","text":"<p>A simple query string query parses a provided query string and searches for documents using the specified fields and options. It supports a variety of query options to refine the search.</p>"},{"location":"simple_query_string/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    sqs \"github.com/sdqri/effdsl/queries/simplequerystring\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        sqs.SimpleQueryString(\n            `\"fried eggs\" +(eggplant | potato) -frittata`,\n            sqs.WithFields(\"title^5\", \"body\"),\n            sqs.WithDefaultOperator(sqs.AND),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"simple_query_string/#parameters","title":"Parameters","text":"<ul> <li> <p>Query (string) (Required, positional) The query string you wish to parse and use for search. This is a required parameter.</p> </li> <li> <p>WithFields (...string) (Optional, Functional option) Array of fields to search. Supports wildcards <code>*</code>.</p> </li> <li> <p>WithDefaultOperator (Operator) (Optional, Functional option) Default boolean logic used to interpret text in the query string. Valid values are:</p> <ul> <li><code>OR</code>: For example, a query value of \"capital of Hungary\" is interpreted as \"capital OR of OR Hungary\".</li> <li><code>AND</code>: For example, a query value of \"capital of Hungary\" is interpreted as \"capital AND of AND Hungary\".</li> </ul> </li> <li> <p>WithAnalyzeWildcard () (Optional, Functional option) If true, the query attempts to analyze wildcard terms in the query string. Defaults to false.</p> </li> <li> <p>WithAnalyzer (string) (Optional, Functional option) Analyzer used to convert text in the query string into tokens.</p> </li> <li> <p>WithAutoGenerateSynonymsPhrase (bool) (Optional, Functional option) If true, match phrase queries are automatically created for multi-term synonyms. Defaults to true.</p> </li> <li> <p>WithFlags (string) (Optional, Functional option) List of enabled operators for the simple query string syntax. Defaults to ALL (all operators). See Limit operators for valid values.</p> </li> <li> <p>WithFuzzyMaxExpansions (int) (Optional, Functional option) Maximum number of terms for fuzzy matching expansion.</p> </li> <li> <p>WithFuzzyPrefixLength (int) (Optional, Functional option) Number of beginning characters left unchanged for fuzzy matching.</p> </li> <li> <p>WithFuzzyTranspositions (bool) (Optional, Functional option) If true, edits for fuzzy matching include transpositions of adjacent characters.</p> </li> <li> <p>WithLenient (bool) (Optional, Functional option) If true, format-based errors are ignored.</p> </li> <li> <p>WithMinimumShouldMatch (string) (Optional, Functional option) Minimum number of clauses that must match for a document to be returned.</p> </li> <li> <p>WithQuoteFieldSuffix (string) (Optional, Functional option) Suffix appended to quoted text in the query string.</p> </li> </ul>"},{"location":"simple_query_string/#additional-information","title":"Additional Information","text":"<p>For more details on the simple query string query and its parameters, refer to the official Elasticsearch documentation on simple query string queries.</p>"},{"location":"sort_search/","title":"Sort search results","text":"<p>Allows you to add one or more sorts on specific fields. Each sort can be reversed as well. The sort is defined on a per field level, with special field name for _score to sort by score, and _doc to sort by index order.</p>"},{"location":"stats_aggregation/","title":"Stats Aggregation","text":"<p>The stats aggregation is a multi-value metrics aggregation that computes min, max, sum, count, and avg over numeric values in the aggregated documents.</p>"},{"location":"stats_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    stats \"github.com/sdqri/effdsl/v2/aggregations/metrics/stats\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        stats.Stats(\n            \"grades_stats\",\n            \"grade\",\n            stats.WithMissing(0),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"stats_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute stats for. Required when script is not set.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for output values.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"stats_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the stats aggregation and its parameters, refer to the official Elasticsearch documentation on stats aggregation.</p>"},{"location":"stats_bucket_aggregation/","title":"Stats Bucket Aggregation","text":"<p>The stats bucket aggregation computes basic statistics across buckets.</p>"},{"location":"stats_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    statsbucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/statsbucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        statsbucket.StatsBucket(\n            \"stats_monthly_sales\",\n            \"sales_per_month&gt;sales\",\n            statsbucket.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"stats_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"stats_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the stats bucket aggregation and its parameters, refer to the official Elasticsearch documentation on stats bucket aggregation.</p>"},{"location":"string_stats_aggregation/","title":"String Stats Aggregation","text":"<p>The string stats aggregation computes statistics over string values extracted from the aggregated documents.</p>"},{"location":"string_stats_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    stringstats \"github.com/sdqri/effdsl/v2/aggregations/metrics/stringstats\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        stringstats.StringStats(\n            \"message_stats\",\n            \"message.keyword\",\n            stringstats.WithShowDistribution(true),\n            stringstats.WithMissing(\"[empty message]\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"string_stats_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to compute string stats for. Required when script is not set.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithShowDistribution (bool) (Optional, functional option) Include character distribution.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"string_stats_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the string stats aggregation and its parameters, refer to the official Elasticsearch documentation on string stats aggregation.</p>"},{"location":"sum_aggregation/","title":"Sum Aggregation","text":"<p>The sum aggregation is a single-value metrics aggregation that sums numeric values extracted from the aggregated documents.</p>"},{"location":"sum_aggregation/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    sum \"github.com/sdqri/effdsl/v2/aggregations/metrics/sum\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        sum.Sum(\n            \"sum_price\",\n            \"price\",\n            sum.WithMissing(0),\n            sum.WithFormat(\"0.00\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"sum_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to sum. Required when script is not set.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Value to use when the field is missing.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output value.</p> </li> <li> <p>WithValueType (string) (Optional, functional option) Hint about the value type for scripted metrics.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"sum_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the sum aggregation and its parameters, refer to the official Elasticsearch documentation on sum aggregation.</p>"},{"location":"sum_bucket_aggregation/","title":"Sum Bucket Aggregation","text":"<p>The sum bucket aggregation computes the sum across buckets of a metric.</p>"},{"location":"sum_bucket_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    sumbucket \"github.com/sdqri/effdsl/v2/aggregations/pipeline/sumbucket\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        sumbucket.SumBucket(\n            \"sum_monthly_sales\",\n            \"sales_per_month&gt;sales\",\n            sumbucket.WithGapPolicy(\"skip\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"sum_bucket_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>BucketsPath (string) (Required, positional) Path to the bucketed metric.</p> </li> <li> <p>WithGapPolicy (string) (Optional, functional option) Gap policy (<code>skip</code>, <code>insert_zeros</code>).</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Decimal format pattern for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"sum_bucket_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the sum bucket aggregation and its parameters, refer to the official Elasticsearch documentation on sum bucket aggregation.</p>"},{"location":"t_test_aggregation/","title":"T-test Aggregation","text":"<p>The t-test aggregation performs a statistical hypothesis test on numeric values extracted from the aggregated documents.</p>"},{"location":"t_test_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    ttest \"github.com/sdqri/effdsl/v2/aggregations/metrics/ttest\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        ttest.TTest(\n            \"startup_time_ttest\",\n            \"startup_time_before\",\n            \"startup_time_after\",\n            ttest.WithType(\"paired\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"t_test_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>A Field (string) (Optional, positional) Field for population A.</p> </li> <li> <p>B Field (string) (Optional, positional) Field for population B.</p> </li> <li> <p>WithAFilter (map[string]any) (Optional, functional option) Filter for population A.</p> </li> <li> <p>WithBFilter (map[string]any) (Optional, functional option) Filter for population B.</p> </li> <li> <p>WithType (string) (Optional, functional option) Test type (<code>paired</code>, <code>homoscedastic</code>, <code>heteroscedastic</code>).</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"t_test_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the t-test aggregation and its parameters, refer to the official Elasticsearch documentation on t-test aggregation.</p>"},{"location":"term_query/","title":"Term Query","text":"<p>A term query returns documents that contain an exact term in a provided field. The term must exactly match the field value, including whitespace and capitalization.</p>"},{"location":"term_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    tq \"github.com/sdqri/effdsl/queries/termquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        tq.TermQuery(\n            \"user.id\",\n            \"kimchy\",\n            tq.WithBoost(1.5),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"term_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Value (string) (Required, positional) The term you wish to find in the provided field. This is a required parameter. The term must exactly match the field value, including whitespace and capitalization.</p> </li> <li> <p>WithBoost (float64) (Optional, Functional option) Floating point number used to decrease or increase the relevance scores of the query. Defaults to 1.0.</p> </li> <li> <p>WithCaseInsensitive (bool) (Optional, Functional option) Allows ASCII case-insensitive matching of the value with the indexed field values when set to true. Defaults to false.</p> </li> </ul>"},{"location":"term_query/#additional-information","title":"Additional Information","text":"<p>For more details on the term query and its parameters, refer to the official Elasticsearch documentation on term queries.</p>"},{"location":"term_suggester/","title":"Term Suggester","text":"<p>The term suggester suggests corrections for individual terms based on edit distance. Each term in the provided text is analyzed, and possible corrections are returned.</p>"},{"location":"term_suggester/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    ts \"github.com/sdqri/effdsl/suggesters/termsuggester\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithSuggest(\n        ts.TermSuggester(\n            \"my-suggestion\",\n            \"tring out Elasticsearch\",\n            \"message\",\n            ts.WithAnalyzer(\"test\"),\n            ts.WithSize(1),\n            ts.WithSort(ts.ByScore),\n            ts.WithMode(ts.Always),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"term_suggester/#parameters","title":"Parameters","text":"<ul> <li>SuggestName (string) (Required, positional) Name used to identify the suggestion in the response.</li> <li>Text (string) (Required, positional) Text to generate suggestions for.</li> <li>Field (string) (Required, positional) Field to fetch candidate suggestions from.</li> <li>WithAnalyzer(string) (Optional, Functional option) Analyzer used to analyze the suggest text.</li> <li>WithSize(uint64) (Optional, Functional option) Maximum number of suggestions to return.</li> <li>WithSort(TermSuggestSort) (Optional, Functional option) Defines how suggestions are sorted. Possible values: <code>ByScore</code>, <code>ByFrequency</code>.</li> <li>WithMode(TermSuggesterMode) (Optional, Functional option) Controls which suggestions are included. Possible values: <code>Missing</code>, <code>Popular</code>, <code>Always</code>.</li> </ul>"},{"location":"term_suggester/#additional-information","title":"Additional Information","text":"<p>For more details on the term suggester and its parameters, refer to the official Elasticsearch documentation on term suggesters.</p>"},{"location":"terms_aggregation/","title":"Terms Aggregation","text":"<p>The terms aggregation buckets documents by unique values of a field.</p>"},{"location":"terms_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    terms \"github.com/sdqri/effdsl/v2/aggregations/bucket/terms\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        terms.Terms(\n            \"categories\",\n            \"category\",\n            terms.WithSize(10),\n            terms.WithOrder(map[string]any{\"_count\": \"desc\"}),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"terms_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to bucket on.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script for term values.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Number of buckets to return.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for bucket collection.</p> </li> <li> <p>WithOrder (map[string]any) (Optional, functional option) Bucket ordering.</p> </li> <li> <p>WithMinDocCount (int) (Optional, functional option) Minimum document count.</p> </li> <li> <p>WithShardMinDocCount (int) (Optional, functional option) Shard-level minimum document count.</p> </li> <li> <p>WithInclude (any) (Optional, functional option) Include pattern or values.</p> </li> <li> <p>WithExclude (any) (Optional, functional option) Exclude pattern or values.</p> </li> <li> <p>WithMissing (any) (Optional, functional option) Default value for missing field values.</p> </li> <li> <p>WithExecutionHint (string) (Optional, functional option) Execution hint.</p> </li> <li> <p>WithCollectMode (string) (Optional, functional option) Collect mode (<code>depth_first</code>, <code>breadth_first</code>).</p> </li> <li> <p>WithShowTermDocCountError (bool) (Optional, functional option) Include doc count error.</p> </li> <li> <p>WithValueType (string) (Optional, functional option) Value type hint.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"terms_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the terms aggregation and its parameters, refer to the official Elasticsearch documentation on terms aggregation.</p>"},{"location":"terms_query/","title":"Terms Query","text":"<p>A terms query returns documents that contain one or more exact terms in a provided field.</p>"},{"location":"terms_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    tsq \"github.com/sdqri/effdsl/queries/termsquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        tsq.TermsQuery(\n            \"user.id\",\n            []string{\"kimchy\", \"elkbee\"},\n            tsq.WithBoost(1.0),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"terms_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Values ([]string) (Required, positional) The array of terms you wish to find in the provided field. This is a required parameter.</p> </li> <li> <p>WithBoost (float64) (Optional, Functional option) Floating point number used to decrease or increase the relevance scores of a query. Defaults to 1.0.</p> </li> </ul>"},{"location":"terms_query/#additional-information","title":"Additional Information","text":"<p>For more details on the terms query and its parameters, refer to the official Elasticsearch documentation on terms queries.</p>"},{"location":"terms_set_query/","title":"Terms Set Query","text":"<p>A term set query returns documents that contain at least one of the specified terms in a provided field. To return a document, at least one of the terms must exactly match the field value, including whitespace and capitalization.</p>"},{"location":"terms_set_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    tsq \"github.com/sdqri/effdsl/queries/termssetquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        tsq.TermsSetQuery(\n            \"programming_languages\",\n            []string{\"c++\", \"java\", \"php\"},\n            tsq.WithMinimumShouldMatchField(\"required_matches\"),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"terms_set_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Terms ([]string) (Required, positional) An array of terms you wish to find in the provided field. To return a document, at least one of the terms must exactly match the field value, including whitespace and capitalization. This is a required parameter.</p> </li> <li> <p>WithMinimumShouldMatchField (string) (Optional, Functional option) The field that holds the minimum number of terms that should match. Only used when <code>minimum_should_match_script</code> is not set.</p> </li> <li> <p>WithMinimumShouldMatchScript (string) (Optional, Functional option) Script that returns the minimum number of terms that should match.</p> </li> </ul>"},{"location":"terms_set_query/#additional-information","title":"Additional Information","text":"<p>For more details on the term set query and its parameters, refer to the official Elasticsearch documentation on term set queries.</p>"},{"location":"top_hits_aggregation/","title":"Top Hits Aggregation","text":"<p>The top hits aggregation keeps track of the most relevant document being aggregated and returns regular search hits per bucket.</p>"},{"location":"top_hits_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    tophits \"github.com/sdqri/effdsl/v2/aggregations/metrics/tophits\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        tophits.TopHits(\n            \"top_sales_hits\",\n            tophits.WithSize(1),\n            tophits.WithSort([]any{map[string]any{\"date\": map[string]any{\"order\": \"desc\"}}}),\n            tophits.WithSource(map[string]any{\"includes\": []string{\"date\", \"price\"}}),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"top_hits_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>WithFrom (int) (Optional, functional option) Offset from the first result.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Number of top hits to return.</p> </li> <li> <p>WithSort ([]any) (Optional, functional option) Sort definition for top hits.</p> </li> <li> <p>WithSource (any) (Optional, functional option) Source filtering definition.</p> </li> <li> <p>WithStoredFields ([]string) (Optional, functional option) Stored fields to return.</p> </li> <li> <p>WithDocvalueFields ([]any) (Optional, functional option) Docvalue fields to return.</p> </li> <li> <p>WithScriptFields (map[string]any) (Optional, functional option) Script fields to return.</p> </li> <li> <p>WithHighlight (map[string]any) (Optional, functional option) Highlighting configuration.</p> </li> <li> <p>WithExplain (bool) (Optional, functional option) Include explanation of scoring.</p> </li> <li> <p>WithTrackScores (bool) (Optional, functional option) Track scores for each hit.</p> </li> <li> <p>WithVersion (bool) (Optional, functional option) Include document version.</p> </li> <li> <p>WithSeqNoPrimaryTerm (bool) (Optional, functional option) Include sequence number and primary term.</p> </li> <li> <p>WithFields ([]any) (Optional, functional option) Fields to return.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"top_hits_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the top hits aggregation and its parameters, refer to the official Elasticsearch documentation on top hits aggregation.</p>"},{"location":"top_metrics_aggregation/","title":"Top Metrics Aggregation","text":"<p>The top metrics aggregation selects metrics from the document with the largest or smallest sort value.</p>"},{"location":"top_metrics_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    topmetrics \"github.com/sdqri/effdsl/v2/aggregations/metrics/topmetrics\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        topmetrics.TopMetrics(\n            \"tm\",\n            map[string]any{\"field\": \"m\"},\n            map[string]any{\"s\": \"desc\"},\n            topmetrics.WithSize(1),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"top_metrics_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Metrics (any) (Required, positional) Metrics configuration (single metric or list of metrics).</p> </li> <li> <p>Sort (any) (Required, positional) Sort configuration.</p> </li> <li> <p>WithSize (int) (Optional, functional option) Number of top documents to return.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"top_metrics_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the top metrics aggregation and its parameters, refer to the official Elasticsearch documentation on top metrics aggregation.</p>"},{"location":"value_count_aggregation/","title":"Value Count Aggregation","text":"<p>The value count aggregation counts the number of values extracted from the aggregated documents.</p>"},{"location":"value_count_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    valuecount \"github.com/sdqri/effdsl/v2/aggregations/metrics/valuecount\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        valuecount.ValueCount(\n            \"types_count\",\n            \"type\",\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"value_count_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Optional, positional) Field to count values for. Required when script is not set.</p> </li> <li> <p>WithScript (Script) (Optional, functional option) Script to compute values for the aggregation. Cannot be used together with Field.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"value_count_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the value count aggregation and its parameters, refer to the official Elasticsearch documentation on value count aggregation.</p>"},{"location":"variable_width_histogram_aggregation/","title":"Variable Width Histogram Aggregation","text":"<p>The variable width histogram aggregation creates buckets with dynamic ranges.</p>"},{"location":"variable_width_histogram_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    variablewidthhistogram \"github.com/sdqri/effdsl/v2/aggregations/bucket/variablewidthhistogram\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        variablewidthhistogram.VariableWidthHistogram(\n            \"price_histogram\",\n            \"price\",\n            5,\n            variablewidthhistogram.WithShardSize(100),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"variable_width_histogram_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Field (string) (Required, positional) Field to bucket on.</p> </li> <li> <p>Buckets (int) (Required, positional) Number of buckets.</p> </li> <li> <p>WithShardSize (int) (Optional, functional option) Shard size for bucket collection.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"variable_width_histogram_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the variable width histogram aggregation and its parameters, refer to the official Elasticsearch documentation on variable width histogram aggregation.</p>"},{"location":"weighted_avg_aggregation/","title":"Weighted Avg Aggregation","text":"<p>The weighted avg aggregation computes the weighted average of numeric values extracted from the aggregated documents.</p>"},{"location":"weighted_avg_aggregation/#example","title":"Example","text":"<pre><code>import (\n    \"strings\"\n\n    es \"github.com/elastic/go-elasticsearch/v8\"\n\n    \"github.com/sdqri/effdsl/v2\"\n    weightedavg \"github.com/sdqri/effdsl/v2/aggregations/metrics/weightedavg\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithAggregation(\n        weightedavg.WeightedAvg(\n            \"weighted_grade\",\n            \"grade\",\n            \"weight\",\n            weightedavg.WithValueMissing(2),\n            weightedavg.WithWeightMissing(3),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"weighted_avg_aggregation/#parameters","title":"Parameters","text":"<ul> <li> <p>Name (string) (Required, positional) Aggregation name.</p> </li> <li> <p>Value Field (string) (Optional, positional) Field to compute values from.</p> </li> <li> <p>Weight Field (string) (Optional, positional) Field to compute weights from.</p> </li> <li> <p>WithValueField (string) (Optional, functional option) Field for the value component.</p> </li> <li> <p>WithValueMissing (any) (Optional, functional option) Missing value for the value component.</p> </li> <li> <p>WithValueScript (Script) (Optional, functional option) Script for the value component.</p> </li> <li> <p>WithWeightField (string) (Optional, functional option) Field for the weight component.</p> </li> <li> <p>WithWeightMissing (any) (Optional, functional option) Missing value for the weight component.</p> </li> <li> <p>WithWeightScript (Script) (Optional, functional option) Script for the weight component.</p> </li> <li> <p>WithFormat (string) (Optional, functional option) Format string for the output value.</p> </li> <li> <p>WithSubAggregation (AggregationResult) (Optional, functional option) Adds an unnamed sub-aggregation.</p> </li> <li> <p>WithNamedSubAggregation (string, AggregationResult) (Optional, functional option) Adds a named sub-aggregation.</p> </li> <li> <p>WithSubAggregationsMap (map[string]AggregationResult) (Optional, functional option) Adds a map of named sub-aggregations.</p> </li> <li> <p>WithMetaField (string, any) (Optional, functional option) Adds a metadata field.</p> </li> <li> <p>WithMetaMap (map[string]any) (Optional, functional option) Replaces the metadata map.</p> </li> </ul>"},{"location":"weighted_avg_aggregation/#additional-information","title":"Additional Information","text":"<p>For more details on the weighted avg aggregation and its parameters, refer to the official Elasticsearch documentation on weighted avg aggregation.</p>"},{"location":"wildcard_query/","title":"Wildcard Query","text":"<p>A wildcard query returns documents that contain terms matching a wildcard pattern. </p>"},{"location":"wildcard_query/#example","title":"Example","text":"<pre><code>import (\n    es \"github.com/elastic/go-elasticsearch/v8\"\n    \"github.com/sdqri/effdsl/v2\"\n    wq \"github.com/sdqri/effdsl/queries/wildcardquery\"\n)\n\nquery, err := effdsl.Define(\n    effdsl.WithQuery(\n        wq.WildcardQuery(\n            \"user.id\",\n            \"ki*y\",\n            wq.WithBoost(1.0),\n            wq.WithRewrite(wcq.ConstantScoreBlended),\n        ),\n    ),\n)\n\nres, err := es.Search(\n    es.Search.WithBody(strings.NewReader(query)),\n)\n</code></pre>"},{"location":"wildcard_query/#parameters","title":"Parameters","text":"<ul> <li> <p>Field (string) (Required, positional) The field you wish to search. This is a required parameter.</p> </li> <li> <p>Value (string) (Required, positional) The wildcard pattern for terms you wish to find in the provided field. This is a required parameter.</p> </li> <li> <p>WithBoost (float64) (Optional, Functional option) Floating point number used to decrease or increase the relevance scores of a query. Defaults to 1.0.</p> </li> <li> <p>WithCaseInsensitive (bool) (Optional, Functional option) If true, the wildcard pattern is treated as case-insensitive.</p> </li> <li> <p>WithRewrite (Rewrite) (Optional, Functional option) Method used to rewrite the query. For valid values and more information, see the rewrite parameter.</p> </li> </ul>"},{"location":"wildcard_query/#additional-information","title":"Additional Information","text":"<p>For more details on the wildcard query and its parameters, refer to the official Elasticsearch documentation on wildcard queries.</p>"}]}